!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define("d3Layout",[],n):"object"==typeof exports?exports.d3Layout=n():t.d3Layout=n()}("undefined"!=typeof self?self:this,function(){return function(t){var n={};function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var i in t)e.d(r,i,function(n){return t[n]}.bind(null,i));return r},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=2)}([function(t,n,e){t.exports=function(){return e(1)('!function(t){var n={};function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var i in t)e.d(r,i,function(n){return t[n]}.bind(null,i));return r},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=0)}([function(t,n,e){"use strict";e.r(n);var r=function(t,n){var e;function r(){var r,i,o=e.length,a=0,s=0;for(r=0;r<o;++r)a+=(i=e[r]).x,s+=i.y;for(a=a/o-t,s=s/o-n,r=0;r<o;++r)(i=e[r]).x-=a,i.y-=s}return null==t&&(t=0),null==n&&(n=0),r.initialize=function(t){e=t},r.x=function(n){return arguments.length?(t=+n,r):t},r.y=function(t){return arguments.length?(n=+t,r):n},r};function i(t,n,e,r){if(isNaN(n)||isNaN(e))return t;var i,o,a,s,u,l,h,f,c,v=t._root,y={data:r},x=t._x0,_=t._y0,d=t._x1,p=t._y1;if(!v)return t._root=y,t;for(;v.length;)if((l=n>=(o=(x+d)/2))?x=o:d=o,(h=e>=(a=(_+p)/2))?_=a:p=a,i=v,!(v=v[f=h<<1|l]))return i[f]=y,t;if(s=+t._x.call(null,v.data),u=+t._y.call(null,v.data),n===s&&e===u)return y.next=v,i?i[f]=y:t._root=y,t;do{i=i?i[f]=new Array(4):t._root=new Array(4),(l=n>=(o=(x+d)/2))?x=o:d=o,(h=e>=(a=(_+p)/2))?_=a:p=a}while((f=h<<1|l)==(c=(u>=a)<<1|s>=o));return i[c]=v,i[f]=y,t}var o=function(t,n,e,r,i){this.node=t,this.x0=n,this.y0=e,this.x1=r,this.y1=i};function a(t){return t[0]}function s(t){return t[1]}function u(t,n,e){var r=new l(null==n?a:n,null==e?s:e,NaN,NaN,NaN,NaN);return null==t?r:r.addAll(t)}function l(t,n,e,r,i,o){this._x=t,this._y=n,this._x0=e,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function h(t){for(var n={data:t.data},e=n;t=t.next;)e=e.next={data:t.data};return n}var f=u.prototype=l.prototype;f.copy=function(){var t,n,e=new l(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return e;if(!r.length)return e._root=h(r),e;for(t=[{source:r,target:e._root=new Array(4)}];r=t.pop();)for(var i=0;i<4;++i)(n=r.source[i])&&(n.length?t.push({source:n,target:r.target[i]=new Array(4)}):r.target[i]=h(n));return e},f.add=function(t){var n=+this._x.call(null,t),e=+this._y.call(null,t);return i(this.cover(n,e),n,e,t)},f.addAll=function(t){var n,e,r,o,a=t.length,s=new Array(a),u=new Array(a),l=1/0,h=1/0,f=-1/0,c=-1/0;for(e=0;e<a;++e)isNaN(r=+this._x.call(null,n=t[e]))||isNaN(o=+this._y.call(null,n))||(s[e]=r,u[e]=o,r<l&&(l=r),r>f&&(f=r),o<h&&(h=o),o>c&&(c=o));for(f<l&&(l=this._x0,f=this._x1),c<h&&(h=this._y0,c=this._y1),this.cover(l,h).cover(f,c),e=0;e<a;++e)i(this,s[e],u[e],t[e]);return this},f.cover=function(t,n){if(isNaN(t=+t)||isNaN(n=+n))return this;var e=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(e))i=(e=Math.floor(t))+1,o=(r=Math.floor(n))+1;else{if(!(e>t||t>i||r>n||n>o))return this;var a,s,u=i-e,l=this._root;switch(s=(n<(r+o)/2)<<1|t<(e+i)/2){case 0:do{(a=new Array(4))[s]=l,l=a}while(o=r+(u*=2),t>(i=e+u)||n>o);break;case 1:do{(a=new Array(4))[s]=l,l=a}while(o=r+(u*=2),(e=i-u)>t||n>o);break;case 2:do{(a=new Array(4))[s]=l,l=a}while(r=o-(u*=2),t>(i=e+u)||r>n);break;case 3:do{(a=new Array(4))[s]=l,l=a}while(r=o-(u*=2),(e=i-u)>t||r>n)}this._root&&this._root.length&&(this._root=l)}return this._x0=e,this._y0=r,this._x1=i,this._y1=o,this},f.data=function(){var t=[];return this.visit(function(n){if(!n.length)do{t.push(n.data)}while(n=n.next)}),t},f.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},f.find=function(t,n,e){var r,i,a,s,u,l,h,f=this._x0,c=this._y0,v=this._x1,y=this._y1,x=[],_=this._root;for(_&&x.push(new o(_,f,c,v,y)),null==e?e=1/0:(f=t-e,c=n-e,v=t+e,y=n+e,e*=e);l=x.pop();)if(!(!(_=l.node)||(i=l.x0)>v||(a=l.y0)>y||(s=l.x1)<f||(u=l.y1)<c))if(_.length){var d=(i+s)/2,p=(a+u)/2;x.push(new o(_[3],d,p,s,u),new o(_[2],i,p,d,u),new o(_[1],d,a,s,p),new o(_[0],i,a,d,p)),(h=(n>=p)<<1|t>=d)&&(l=x[x.length-1],x[x.length-1]=x[x.length-1-h],x[x.length-1-h]=l)}else{var g=t-+this._x.call(null,_.data),w=n-+this._y.call(null,_.data),m=g*g+w*w;if(m<e){var N=Math.sqrt(e=m);f=t-N,c=n-N,v=t+N,y=n+N,r=_.data}}return r},f.remove=function(t){if(isNaN(o=+this._x.call(null,t))||isNaN(a=+this._y.call(null,t)))return this;var n,e,r,i,o,a,s,u,l,h,f,c,v=this._root,y=this._x0,x=this._y0,_=this._x1,d=this._y1;if(!v)return this;if(v.length)for(;;){if((l=o>=(s=(y+_)/2))?y=s:_=s,(h=a>=(u=(x+d)/2))?x=u:d=u,n=v,!(v=v[f=h<<1|l]))return this;if(!v.length)break;(n[f+1&3]||n[f+2&3]||n[f+3&3])&&(e=n,c=f)}for(;v.data!==t;)if(r=v,!(v=v.next))return this;return(i=v.next)&&delete v.next,r?(i?r.next=i:delete r.next,this):n?(i?n[f]=i:delete n[f],(v=n[0]||n[1]||n[2]||n[3])&&v===(n[3]||n[2]||n[1]||n[0])&&!v.length&&(e?e[c]=v:this._root=v),this):(this._root=i,this)},f.removeAll=function(t){for(var n=0,e=t.length;n<e;++n)this.remove(t[n]);return this},f.root=function(){return this._root},f.size=function(){var t=0;return this.visit(function(n){if(!n.length)do{++t}while(n=n.next)}),t},f.visit=function(t){var n,e,r,i,a,s,u=[],l=this._root;for(l&&u.push(new o(l,this._x0,this._y0,this._x1,this._y1));n=u.pop();)if(!t(l=n.node,r=n.x0,i=n.y0,a=n.x1,s=n.y1)&&l.length){var h=(r+a)/2,f=(i+s)/2;(e=l[3])&&u.push(new o(e,h,f,a,s)),(e=l[2])&&u.push(new o(e,r,f,h,s)),(e=l[1])&&u.push(new o(e,h,i,a,f)),(e=l[0])&&u.push(new o(e,r,i,h,f))}return this},f.visitAfter=function(t){var n,e=[],r=[];for(this._root&&e.push(new o(this._root,this._x0,this._y0,this._x1,this._y1));n=e.pop();){var i=n.node;if(i.length){var a,s=n.x0,u=n.y0,l=n.x1,h=n.y1,f=(s+l)/2,c=(u+h)/2;(a=i[0])&&e.push(new o(a,s,u,f,c)),(a=i[1])&&e.push(new o(a,f,u,l,c)),(a=i[2])&&e.push(new o(a,s,c,f,h)),(a=i[3])&&e.push(new o(a,f,c,l,h))}r.push(n)}for(;n=r.pop();)t(n.node,n.x0,n.y0,n.x1,n.y1);return this},f.x=function(t){return arguments.length?(this._x=t,this):this._x},f.y=function(t){return arguments.length?(this._y=t,this):this._y};var c=function(t){return function(){return t}},v=function(){return 1e-6*(Math.random()-.5)};function y(t){return t.x+t.vx}function x(t){return t.y+t.vy}var _=function(t){var n,e,r=1,i=1;function o(){for(var t,o,s,l,h,f,c,_=n.length,d=0;d<i;++d)for(o=u(n,y,x).visitAfter(a),t=0;t<_;++t)s=n[t],f=e[s.index],c=f*f,l=s.x+s.vx,h=s.y+s.vy,o.visit(p);function p(t,n,e,i,o){var a=t.data,u=t.r,y=f+u;if(!a)return n>l+y||i<l-y||e>h+y||o<h-y;if(a.index>s.index){var x=l-a.x-a.vx,_=h-a.y-a.vy,d=x*x+_*_;d<y*y&&(0===x&&(d+=(x=v())*x),0===_&&(d+=(_=v())*_),d=(y-(d=Math.sqrt(d)))/d*r,s.vx+=(x*=d)*(y=(u*=u)/(c+u)),s.vy+=(_*=d)*y,a.vx-=x*(y=1-y),a.vy-=_*y)}}}function a(t){if(t.data)return t.r=e[t.data.index];for(var n=t.r=0;n<4;++n)t[n]&&t[n].r>t.r&&(t.r=t[n].r)}function s(){if(n){var r,i,o=n.length;for(e=new Array(o),r=0;r<o;++r)i=n[r],e[i.index]=+t(i,r,n)}}return"function"!=typeof t&&(t=c(null==t?1:+t)),o.initialize=function(t){n=t,s()},o.iterations=function(t){return arguments.length?(i=+t,o):i},o.strength=function(t){return arguments.length?(r=+t,o):r},o.radius=function(n){return arguments.length?(t="function"==typeof n?n:c(+n),s(),o):t},o};function d(t){return t.index}function p(t,n){var e=t.get(n);if(!e)throw new Error("missing: "+n);return e}var g=function(t){var n,e,r,i,o,a=d,s=function(t){return 1/Math.min(i[t.source.index],i[t.target.index])},u=c(30),l=1;function h(r){for(var i=0,a=t.length;i<l;++i)for(var s,u,h,f,c,y,x,_=0;_<a;++_)u=(s=t[_]).source,f=(h=s.target).x+h.vx-u.x-u.vx||v(),c=h.y+h.vy-u.y-u.vy||v(),f*=y=((y=Math.sqrt(f*f+c*c))-e[_])/y*r*n[_],c*=y,h.vx-=f*(x=o[_]),h.vy-=c*x,u.vx+=f*(x=1-x),u.vy+=c*x}function f(){if(r){var s,u,l=r.length,h=t.length,f=new Map(r.map((t,n)=>[a(t,n,r),t]));for(s=0,i=new Array(l);s<h;++s)(u=t[s]).index=s,"object"!=typeof u.source&&(u.source=p(f,u.source)),"object"!=typeof u.target&&(u.target=p(f,u.target)),i[u.source.index]=(i[u.source.index]||0)+1,i[u.target.index]=(i[u.target.index]||0)+1;for(s=0,o=new Array(h);s<h;++s)u=t[s],o[s]=i[u.source.index]/(i[u.source.index]+i[u.target.index]);n=new Array(h),y(),e=new Array(h),x()}}function y(){if(r)for(var e=0,i=t.length;e<i;++e)n[e]=+s(t[e],e,t)}function x(){if(r)for(var n=0,i=t.length;n<i;++n)e[n]=+u(t[n],n,t)}return null==t&&(t=[]),h.initialize=function(t){r=t,f()},h.links=function(n){return arguments.length?(t=n,f(),h):t},h.id=function(t){return arguments.length?(a=t,h):a},h.iterations=function(t){return arguments.length?(l=+t,h):l},h.strength=function(t){return arguments.length?(s="function"==typeof t?t:c(+t),y(),h):s},h.distance=function(t){return arguments.length?(u="function"==typeof t?t:c(+t),x(),h):u},h},w={value:function(){}};function m(){for(var t,n=0,e=arguments.length,r={};n<e;++n){if(!(t=arguments[n]+"")||t in r)throw new Error("illegal type: "+t);r[t]=[]}return new N(r)}function N(t){this._=t}function M(t,n){for(var e,r=0,i=t.length;r<i;++r)if((e=t[r]).name===n)return e.value}function b(t,n,e){for(var r=0,i=t.length;r<i;++r)if(t[r].name===n){t[r]=w,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=e&&t.push({name:n,value:e}),t}N.prototype=m.prototype={constructor:N,on:function(t,n){var e,r,i=this._,o=(r=i,(t+"").trim().split(/^|\\s+/).map(function(t){var n="",e=t.indexOf(".");if(e>=0&&(n=t.slice(e+1),t=t.slice(0,e)),t&&!r.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}})),a=-1,s=o.length;if(!(arguments.length<2)){if(null!=n&&"function"!=typeof n)throw new Error("invalid callback: "+n);for(;++a<s;)if(e=(t=o[a]).type)i[e]=b(i[e],t.name,n);else if(null==n)for(e in i)i[e]=b(i[e],t.name,null);return this}for(;++a<s;)if((e=(t=o[a]).type)&&(e=M(i[e],t.name)))return e},copy:function(){var t={},n=this._;for(var e in n)t[e]=n[e].slice();return new N(t)},call:function(t,n){if((e=arguments.length-2)>0)for(var e,r,i=new Array(e),o=0;o<e;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,e=(r=this._[t]).length;o<e;++o)r[o].value.apply(n,i)},apply:function(t,n,e){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(n,e)}};var k,A,E=m,j=0,O=0,q=0,P=1e3,z=0,T=0,D=0,L="object"==typeof performance&&performance.now?performance:Date,S="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function I(){return T||(S(F),T=L.now()+D)}function F(){T=0}function B(){this._call=this._time=this._next=null}function C(t,n,e){var r=new B;return r.restart(t,n,e),r}function G(){T=(z=L.now())+D,j=O=0;try{!function(){I(),++j;for(var t,n=k;n;)(t=T-n._time)>=0&&n._call.call(null,t),n=n._next;--j}()}finally{j=0,function(){var t,n,e=k,r=1/0;for(;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:k=n);A=t,J(r)}(),T=0}}function H(){var t=L.now(),n=t-z;n>P&&(D-=n,z=t)}function J(t){j||(O&&(O=clearTimeout(O)),t-T>24?(t<1/0&&(O=setTimeout(G,t-L.now()-D)),q&&(q=clearInterval(q))):(q||(z=L.now(),q=setInterval(H,P)),j=1,S(G)))}B.prototype=C.prototype={constructor:B,restart:function(t,n,e){if("function"!=typeof t)throw new TypeError("callback is not a function");e=(null==e?I():+e)+(null==n?0:+n),this._next||A===this||(A?A._next=this:k=this,A=this),this._call=t,this._time=e,J()},stop:function(){this._call&&(this._call=null,this._time=1/0,J())}};function K(t){return t.x}function Q(t){return t.y}var R=10,U=Math.PI*(3-Math.sqrt(5)),V=function(t){var n,e=1,r=.001,i=1-Math.pow(r,1/300),o=0,a=.6,s=new Map,u=C(h),l=E("tick","end");function h(){f(),l.call("tick",n),e<r&&(u.stop(),l.call("end",n))}function f(r){var u,l,h=t.length;void 0===r&&(r=1);for(var f=0;f<r;++f)for(e+=(o-e)*i,s.forEach(function(t){t(e)}),u=0;u<h;++u)null==(l=t[u]).fx?l.x+=l.vx*=a:(l.x=l.fx,l.vx=0),null==l.fy?l.y+=l.vy*=a:(l.y=l.fy,l.vy=0);return n}function c(){for(var n,e=0,r=t.length;e<r;++e){if((n=t[e]).index=e,isNaN(n.fx)||(n.x=n.fx),isNaN(n.fy)||(n.y=n.fy),isNaN(n.x)||isNaN(n.y)){var i=R*Math.sqrt(e),o=e*U;n.x=i*Math.cos(o),n.y=i*Math.sin(o)}(isNaN(n.vx)||isNaN(n.vy))&&(n.vx=n.vy=0)}}function v(n){return n.initialize&&n.initialize(t),n}return null==t&&(t=[]),c(),n={tick:f,restart:function(){return u.restart(h),n},stop:function(){return u.stop(),n},nodes:function(e){return arguments.length?(t=e,c(),s.forEach(v),n):t},alpha:function(t){return arguments.length?(e=+t,n):e},alphaMin:function(t){return arguments.length?(r=+t,n):r},alphaDecay:function(t){return arguments.length?(i=+t,n):+i},alphaTarget:function(t){return arguments.length?(o=+t,n):o},velocityDecay:function(t){return arguments.length?(a=1-t,n):1-a},force:function(t,e){return arguments.length>1?(null==e?s.delete(t):s.set(t,v(e)),n):s.get(t)},find:function(n,e,r){var i,o,a,s,u,l=0,h=t.length;for(null==r?r=1/0:r*=r,l=0;l<h;++l)(a=(i=n-(s=t[l]).x)*i+(o=e-s.y)*o)<r&&(u=s,r=a);return u},on:function(t,e){return arguments.length>1?(l.on(t,e),n):l.on(t)}}},W=function(){var t,n,e,r,i=c(-30),o=1,a=1/0,s=.81;function l(r){var i,o=t.length,a=u(t,K,Q).visitAfter(f);for(e=r,i=0;i<o;++i)n=t[i],a.visit(y)}function h(){if(t){var n,e,o=t.length;for(r=new Array(o),n=0;n<o;++n)e=t[n],r[e.index]=+i(e,n,t)}}function f(t){var n,e,i,o,a,s=0,u=0;if(t.length){for(i=o=a=0;a<4;++a)(n=t[a])&&(e=Math.abs(n.value))&&(s+=n.value,u+=e,i+=e*n.x,o+=e*n.y);t.x=i/u,t.y=o/u}else{(n=t).x=n.data.x,n.y=n.data.y;do{s+=r[n.data.index]}while(n=n.next)}t.value=s}function y(t,i,u,l){if(!t.value)return!0;var h=t.x-n.x,f=t.y-n.y,c=l-i,y=h*h+f*f;if(c*c/s<y)return y<a&&(0===h&&(y+=(h=v())*h),0===f&&(y+=(f=v())*f),y<o&&(y=Math.sqrt(o*y)),n.vx+=h*t.value*e/y,n.vy+=f*t.value*e/y),!0;if(!(t.length||y>=a)){(t.data!==n||t.next)&&(0===h&&(y+=(h=v())*h),0===f&&(y+=(f=v())*f),y<o&&(y=Math.sqrt(o*y)));do{t.data!==n&&(c=r[t.data.index]*e/y,n.vx+=h*c,n.vy+=f*c)}while(t=t.next)}}return l.initialize=function(n){t=n,h()},l.strength=function(t){return arguments.length?(i="function"==typeof t?t:c(+t),h(),l):i},l.distanceMin=function(t){return arguments.length?(o=t*t,l):Math.sqrt(o)},l.distanceMax=function(t){return arguments.length?(a=t*t,l):Math.sqrt(a)},l.theta=function(t){return arguments.length?(s=t*t,l):Math.sqrt(s)},l};class X{constructor(){this.events={}}on(t,n){return"object"!=typeof this.events[t]&&(this.events[t]=[]),this.events[t].push(n),()=>this.removeListener(t,n)}removeListener(t,n){if("object"!=typeof this.events[t])return;const e=this.events[t].indexOf(n);e>-1&&this.events[t].splice(e,1)}removeAllListeners(){Object.keys(this.events).forEach(t=>this.events[t].splice(0,this.events[t].length))}emit(t,...n){"object"==typeof this.events[t]&&[...this.events[t]].forEach(t=>t.apply(this,n))}once(t,n){const e=this.on(t,(...t)=>{e(),n.apply(this,t)});return e}}class Y{constructor(){this.onEvent=new X,this._nodes=[],this._links=[]}init(t){this._nodes=t.nodes,this._links=t.links,this._simulation=V(this._nodes).force("charge",W().strength(-1e3)).force("link",g(this._links).id(t=>t.id).distance(300)).force("center",r()).force("collision",_().radius(t=>t.size).iterations(2)).velocityDecay(.08).stop()}calculate(){for(let t=0,n=Math.ceil(Math.log(this._simulation.alphaMin())/Math.log(1-this._simulation.alphaDecay()));t<n;++t)this.onEvent.emit("tick",t/n),this._simulation.tick();this.onEvent.emit("end",{nodes:this._nodes,links:this._links})}destroy(){this._simulation.stop()}}const Z=self;let $=null;Z.addEventListener("message",t=>{const n=t.data;switch(n.name){case"init":($=new Y).onEvent.on("tick",t=>{Z.postMessage({type:"tick",progress:t})}),$.onEvent.on("end",t=>{Z.postMessage({type:"end",d:t})}),$.init(n);break;case"calculate":$&&$.calculate();break;case"destroy":$&&($.onEvent.removeAllListeners(),$.destroy()),$=null}});n.default=null}]);',null)}},function(t,n,e){"use strict";var r=window.URL||window.webkitURL;t.exports=function(t,n){try{try{var e;try{(e=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder)).append(t),e=e.getBlob()}catch(n){e=new Blob([t])}return new Worker(r.createObjectURL(e))}catch(n){return new Worker("data:application/javascript,"+encodeURIComponent(t))}}catch(t){if(!n)throw Error("Inline worker is not supported");return new Worker(n)}}},function(t,n,e){"use strict";e.r(n);var r=e(0),i=e.n(r);class o{constructor(){this.events={}}on(t,n){return"object"!=typeof this.events[t]&&(this.events[t]=[]),this.events[t].push(n),()=>this.removeListener(t,n)}removeListener(t,n){if("object"!=typeof this.events[t])return;const e=this.events[t].indexOf(n);e>-1&&this.events[t].splice(e,1)}removeAllListeners(){Object.keys(this.events).forEach(t=>this.events[t].splice(0,this.events[t].length))}emit(t,...n){"object"==typeof this.events[t]&&[...this.events[t]].forEach(t=>t.apply(this,n))}once(t,n){const e=this.on(t,(...t)=>{e(),n.apply(this,t)});return e}}var s=function(t,n){var e;function r(){var r,i,o=e.length,s=0,a=0;for(r=0;r<o;++r)s+=(i=e[r]).x,a+=i.y;for(s=s/o-t,a=a/o-n,r=0;r<o;++r)(i=e[r]).x-=s,i.y-=a}return null==t&&(t=0),null==n&&(n=0),r.initialize=function(t){e=t},r.x=function(n){return arguments.length?(t=+n,r):t},r.y=function(t){return arguments.length?(n=+t,r):n},r};function a(t,n,e,r){if(isNaN(n)||isNaN(e))return t;var i,o,s,a,u,l,h,f,c,y=t._root,v={data:r},_=t._x0,d=t._y0,x=t._x1,p=t._y1;if(!y)return t._root=v,t;for(;y.length;)if((l=n>=(o=(_+x)/2))?_=o:x=o,(h=e>=(s=(d+p)/2))?d=s:p=s,i=y,!(y=y[f=h<<1|l]))return i[f]=v,t;if(a=+t._x.call(null,y.data),u=+t._y.call(null,y.data),n===a&&e===u)return v.next=y,i?i[f]=v:t._root=v,t;do{i=i?i[f]=new Array(4):t._root=new Array(4),(l=n>=(o=(_+x)/2))?_=o:x=o,(h=e>=(s=(d+p)/2))?d=s:p=s}while((f=h<<1|l)==(c=(u>=s)<<1|a>=o));return i[c]=y,i[f]=v,t}var u=function(t,n,e,r,i){this.node=t,this.x0=n,this.y0=e,this.x1=r,this.y1=i};function l(t){return t[0]}function h(t){return t[1]}function f(t,n,e){var r=new c(null==n?l:n,null==e?h:e,NaN,NaN,NaN,NaN);return null==t?r:r.addAll(t)}function c(t,n,e,r,i,o){this._x=t,this._y=n,this._x0=e,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function y(t){for(var n={data:t.data},e=n;t=t.next;)e=e.next={data:t.data};return n}var v=f.prototype=c.prototype;v.copy=function(){var t,n,e=new c(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return e;if(!r.length)return e._root=y(r),e;for(t=[{source:r,target:e._root=new Array(4)}];r=t.pop();)for(var i=0;i<4;++i)(n=r.source[i])&&(n.length?t.push({source:n,target:r.target[i]=new Array(4)}):r.target[i]=y(n));return e},v.add=function(t){var n=+this._x.call(null,t),e=+this._y.call(null,t);return a(this.cover(n,e),n,e,t)},v.addAll=function(t){var n,e,r,i,o=t.length,s=new Array(o),u=new Array(o),l=1/0,h=1/0,f=-1/0,c=-1/0;for(e=0;e<o;++e)isNaN(r=+this._x.call(null,n=t[e]))||isNaN(i=+this._y.call(null,n))||(s[e]=r,u[e]=i,r<l&&(l=r),r>f&&(f=r),i<h&&(h=i),i>c&&(c=i));for(f<l&&(l=this._x0,f=this._x1),c<h&&(h=this._y0,c=this._y1),this.cover(l,h).cover(f,c),e=0;e<o;++e)a(this,s[e],u[e],t[e]);return this},v.cover=function(t,n){if(isNaN(t=+t)||isNaN(n=+n))return this;var e=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(e))i=(e=Math.floor(t))+1,o=(r=Math.floor(n))+1;else{if(!(e>t||t>i||r>n||n>o))return this;var s,a,u=i-e,l=this._root;switch(a=(n<(r+o)/2)<<1|t<(e+i)/2){case 0:do{(s=new Array(4))[a]=l,l=s}while(o=r+(u*=2),t>(i=e+u)||n>o);break;case 1:do{(s=new Array(4))[a]=l,l=s}while(o=r+(u*=2),(e=i-u)>t||n>o);break;case 2:do{(s=new Array(4))[a]=l,l=s}while(r=o-(u*=2),t>(i=e+u)||r>n);break;case 3:do{(s=new Array(4))[a]=l,l=s}while(r=o-(u*=2),(e=i-u)>t||r>n)}this._root&&this._root.length&&(this._root=l)}return this._x0=e,this._y0=r,this._x1=i,this._y1=o,this},v.data=function(){var t=[];return this.visit(function(n){if(!n.length)do{t.push(n.data)}while(n=n.next)}),t},v.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},v.find=function(t,n,e){var r,i,o,s,a,l,h,f=this._x0,c=this._y0,y=this._x1,v=this._y1,_=[],d=this._root;for(d&&_.push(new u(d,f,c,y,v)),null==e?e=1/0:(f=t-e,c=n-e,y=t+e,v=n+e,e*=e);l=_.pop();)if(!(!(d=l.node)||(i=l.x0)>y||(o=l.y0)>v||(s=l.x1)<f||(a=l.y1)<c))if(d.length){var x=(i+s)/2,p=(o+a)/2;_.push(new u(d[3],x,p,s,a),new u(d[2],i,p,x,a),new u(d[1],x,o,s,p),new u(d[0],i,o,x,p)),(h=(n>=p)<<1|t>=x)&&(l=_[_.length-1],_[_.length-1]=_[_.length-1-h],_[_.length-1-h]=l)}else{var g=t-+this._x.call(null,d.data),w=n-+this._y.call(null,d.data),m=g*g+w*w;if(m<e){var N=Math.sqrt(e=m);f=t-N,c=n-N,y=t+N,v=n+N,r=d.data}}return r},v.remove=function(t){if(isNaN(o=+this._x.call(null,t))||isNaN(s=+this._y.call(null,t)))return this;var n,e,r,i,o,s,a,u,l,h,f,c,y=this._root,v=this._x0,_=this._y0,d=this._x1,x=this._y1;if(!y)return this;if(y.length)for(;;){if((l=o>=(a=(v+d)/2))?v=a:d=a,(h=s>=(u=(_+x)/2))?_=u:x=u,n=y,!(y=y[f=h<<1|l]))return this;if(!y.length)break;(n[f+1&3]||n[f+2&3]||n[f+3&3])&&(e=n,c=f)}for(;y.data!==t;)if(r=y,!(y=y.next))return this;return(i=y.next)&&delete y.next,r?(i?r.next=i:delete r.next,this):n?(i?n[f]=i:delete n[f],(y=n[0]||n[1]||n[2]||n[3])&&y===(n[3]||n[2]||n[1]||n[0])&&!y.length&&(e?e[c]=y:this._root=y),this):(this._root=i,this)},v.removeAll=function(t){for(var n=0,e=t.length;n<e;++n)this.remove(t[n]);return this},v.root=function(){return this._root},v.size=function(){var t=0;return this.visit(function(n){if(!n.length)do{++t}while(n=n.next)}),t},v.visit=function(t){var n,e,r,i,o,s,a=[],l=this._root;for(l&&a.push(new u(l,this._x0,this._y0,this._x1,this._y1));n=a.pop();)if(!t(l=n.node,r=n.x0,i=n.y0,o=n.x1,s=n.y1)&&l.length){var h=(r+o)/2,f=(i+s)/2;(e=l[3])&&a.push(new u(e,h,f,o,s)),(e=l[2])&&a.push(new u(e,r,f,h,s)),(e=l[1])&&a.push(new u(e,h,i,o,f)),(e=l[0])&&a.push(new u(e,r,i,h,f))}return this},v.visitAfter=function(t){var n,e=[],r=[];for(this._root&&e.push(new u(this._root,this._x0,this._y0,this._x1,this._y1));n=e.pop();){var i=n.node;if(i.length){var o,s=n.x0,a=n.y0,l=n.x1,h=n.y1,f=(s+l)/2,c=(a+h)/2;(o=i[0])&&e.push(new u(o,s,a,f,c)),(o=i[1])&&e.push(new u(o,f,a,l,c)),(o=i[2])&&e.push(new u(o,s,c,f,h)),(o=i[3])&&e.push(new u(o,f,c,l,h))}r.push(n)}for(;n=r.pop();)t(n.node,n.x0,n.y0,n.x1,n.y1);return this},v.x=function(t){return arguments.length?(this._x=t,this):this._x},v.y=function(t){return arguments.length?(this._y=t,this):this._y};var _=function(t){return function(){return t}},d=function(){return 1e-6*(Math.random()-.5)};function x(t){return t.x+t.vx}function p(t){return t.y+t.vy}var g=function(t){var n,e,r=1,i=1;function o(){for(var t,o,a,u,l,h,c,y=n.length,v=0;v<i;++v)for(o=f(n,x,p).visitAfter(s),t=0;t<y;++t)a=n[t],h=e[a.index],c=h*h,u=a.x+a.vx,l=a.y+a.vy,o.visit(_);function _(t,n,e,i,o){var s=t.data,f=t.r,y=h+f;if(!s)return n>u+y||i<u-y||e>l+y||o<l-y;if(s.index>a.index){var v=u-s.x-s.vx,_=l-s.y-s.vy,x=v*v+_*_;x<y*y&&(0===v&&(x+=(v=d())*v),0===_&&(x+=(_=d())*_),x=(y-(x=Math.sqrt(x)))/x*r,a.vx+=(v*=x)*(y=(f*=f)/(c+f)),a.vy+=(_*=x)*y,s.vx-=v*(y=1-y),s.vy-=_*y)}}}function s(t){if(t.data)return t.r=e[t.data.index];for(var n=t.r=0;n<4;++n)t[n]&&t[n].r>t.r&&(t.r=t[n].r)}function a(){if(n){var r,i,o=n.length;for(e=new Array(o),r=0;r<o;++r)i=n[r],e[i.index]=+t(i,r,n)}}return"function"!=typeof t&&(t=_(null==t?1:+t)),o.initialize=function(t){n=t,a()},o.iterations=function(t){return arguments.length?(i=+t,o):i},o.strength=function(t){return arguments.length?(r=+t,o):r},o.radius=function(n){return arguments.length?(t="function"==typeof n?n:_(+n),a(),o):t},o};function w(t){return t.index}function m(t,n){var e=t.get(n);if(!e)throw new Error("missing: "+n);return e}var N=function(t){var n,e,r,i,o,s=w,a=function(t){return 1/Math.min(i[t.source.index],i[t.target.index])},u=_(30),l=1;function h(r){for(var i=0,s=t.length;i<l;++i)for(var a,u,h,f,c,y,v,_=0;_<s;++_)u=(a=t[_]).source,f=(h=a.target).x+h.vx-u.x-u.vx||d(),c=h.y+h.vy-u.y-u.vy||d(),f*=y=((y=Math.sqrt(f*f+c*c))-e[_])/y*r*n[_],c*=y,h.vx-=f*(v=o[_]),h.vy-=c*v,u.vx+=f*(v=1-v),u.vy+=c*v}function f(){if(r){var a,u,l=r.length,h=t.length,f=new Map(r.map((t,n)=>[s(t,n,r),t]));for(a=0,i=new Array(l);a<h;++a)(u=t[a]).index=a,"object"!=typeof u.source&&(u.source=m(f,u.source)),"object"!=typeof u.target&&(u.target=m(f,u.target)),i[u.source.index]=(i[u.source.index]||0)+1,i[u.target.index]=(i[u.target.index]||0)+1;for(a=0,o=new Array(h);a<h;++a)u=t[a],o[a]=i[u.source.index]/(i[u.source.index]+i[u.target.index]);n=new Array(h),c(),e=new Array(h),y()}}function c(){if(r)for(var e=0,i=t.length;e<i;++e)n[e]=+a(t[e],e,t)}function y(){if(r)for(var n=0,i=t.length;n<i;++n)e[n]=+u(t[n],n,t)}return null==t&&(t=[]),h.initialize=function(t){r=t,f()},h.links=function(n){return arguments.length?(t=n,f(),h):t},h.id=function(t){return arguments.length?(s=t,h):s},h.iterations=function(t){return arguments.length?(l=+t,h):l},h.strength=function(t){return arguments.length?(a="function"==typeof t?t:_(+t),c(),h):a},h.distance=function(t){return arguments.length?(u="function"==typeof t?t:_(+t),y(),h):u},h},k={value:function(){}};function b(){for(var t,n=0,e=arguments.length,r={};n<e;++n){if(!(t=arguments[n]+"")||t in r)throw new Error("illegal type: "+t);r[t]=[]}return new M(r)}function M(t){this._=t}function A(t,n){for(var e,r=0,i=t.length;r<i;++r)if((e=t[r]).name===n)return e.value}function E(t,n,e){for(var r=0,i=t.length;r<i;++r)if(t[r].name===n){t[r]=k,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=e&&t.push({name:n,value:e}),t}M.prototype=b.prototype={constructor:M,on:function(t,n){var e,r,i=this._,o=(r=i,(t+"").trim().split(/^|\s+/).map(function(t){var n="",e=t.indexOf(".");if(e>=0&&(n=t.slice(e+1),t=t.slice(0,e)),t&&!r.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}})),s=-1,a=o.length;if(!(arguments.length<2)){if(null!=n&&"function"!=typeof n)throw new Error("invalid callback: "+n);for(;++s<a;)if(e=(t=o[s]).type)i[e]=E(i[e],t.name,n);else if(null==n)for(e in i)i[e]=E(i[e],t.name,null);return this}for(;++s<a;)if((e=(t=o[s]).type)&&(e=A(i[e],t.name)))return e},copy:function(){var t={},n=this._;for(var e in n)t[e]=n[e].slice();return new M(t)},call:function(t,n){if((e=arguments.length-2)>0)for(var e,r,i=new Array(e),o=0;o<e;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,e=(r=this._[t]).length;o<e;++o)r[o].value.apply(n,i)},apply:function(t,n,e){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(n,e)}};var j,O,q=b,z=0,L=0,T=0,P=1e3,D=0,B=0,S=0,I="object"==typeof performance&&performance.now?performance:Date,W="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function $(){return B||(W(F),B=I.now()+S)}function F(){B=0}function R(){this._call=this._time=this._next=null}function U(t,n,e){var r=new R;return r.restart(t,n,e),r}function C(){B=(D=I.now())+S,z=L=0;try{!function(){$(),++z;for(var t,n=j;n;)(t=B-n._time)>=0&&n._call.call(null,t),n=n._next;--z}()}finally{z=0,function(){var t,n,e=j,r=1/0;for(;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:j=n);O=t,Z(r)}(),B=0}}function J(){var t=I.now(),n=t-D;n>P&&(S-=n,D=t)}function Z(t){z||(L&&(L=clearTimeout(L)),t-B>24?(t<1/0&&(L=setTimeout(C,t-I.now()-S)),T&&(T=clearInterval(T))):(T||(D=I.now(),T=setInterval(J,P)),z=1,W(C)))}R.prototype=U.prototype={constructor:R,restart:function(t,n,e){if("function"!=typeof t)throw new TypeError("callback is not a function");e=(null==e?$():+e)+(null==n?0:+n),this._next||O===this||(O?O._next=this:j=this,O=this),this._call=t,this._time=e,Z()},stop:function(){this._call&&(this._call=null,this._time=1/0,Z())}};function G(t){return t.x}function K(t){return t.y}var H=10,Q=Math.PI*(3-Math.sqrt(5)),V=function(t){var n,e=1,r=.001,i=1-Math.pow(r,1/300),o=0,s=.6,a=new Map,u=U(h),l=q("tick","end");function h(){f(),l.call("tick",n),e<r&&(u.stop(),l.call("end",n))}function f(r){var u,l,h=t.length;void 0===r&&(r=1);for(var f=0;f<r;++f)for(e+=(o-e)*i,a.forEach(function(t){t(e)}),u=0;u<h;++u)null==(l=t[u]).fx?l.x+=l.vx*=s:(l.x=l.fx,l.vx=0),null==l.fy?l.y+=l.vy*=s:(l.y=l.fy,l.vy=0);return n}function c(){for(var n,e=0,r=t.length;e<r;++e){if((n=t[e]).index=e,isNaN(n.fx)||(n.x=n.fx),isNaN(n.fy)||(n.y=n.fy),isNaN(n.x)||isNaN(n.y)){var i=H*Math.sqrt(e),o=e*Q;n.x=i*Math.cos(o),n.y=i*Math.sin(o)}(isNaN(n.vx)||isNaN(n.vy))&&(n.vx=n.vy=0)}}function y(n){return n.initialize&&n.initialize(t),n}return null==t&&(t=[]),c(),n={tick:f,restart:function(){return u.restart(h),n},stop:function(){return u.stop(),n},nodes:function(e){return arguments.length?(t=e,c(),a.forEach(y),n):t},alpha:function(t){return arguments.length?(e=+t,n):e},alphaMin:function(t){return arguments.length?(r=+t,n):r},alphaDecay:function(t){return arguments.length?(i=+t,n):+i},alphaTarget:function(t){return arguments.length?(o=+t,n):o},velocityDecay:function(t){return arguments.length?(s=1-t,n):1-s},force:function(t,e){return arguments.length>1?(null==e?a.delete(t):a.set(t,y(e)),n):a.get(t)},find:function(n,e,r){var i,o,s,a,u,l=0,h=t.length;for(null==r?r=1/0:r*=r,l=0;l<h;++l)(s=(i=n-(a=t[l]).x)*i+(o=e-a.y)*o)<r&&(u=a,r=s);return u},on:function(t,e){return arguments.length>1?(l.on(t,e),n):l.on(t)}}},X=function(){var t,n,e,r,i=_(-30),o=1,s=1/0,a=.81;function u(r){var i,o=t.length,s=f(t,G,K).visitAfter(h);for(e=r,i=0;i<o;++i)n=t[i],s.visit(c)}function l(){if(t){var n,e,o=t.length;for(r=new Array(o),n=0;n<o;++n)e=t[n],r[e.index]=+i(e,n,t)}}function h(t){var n,e,i,o,s,a=0,u=0;if(t.length){for(i=o=s=0;s<4;++s)(n=t[s])&&(e=Math.abs(n.value))&&(a+=n.value,u+=e,i+=e*n.x,o+=e*n.y);t.x=i/u,t.y=o/u}else{(n=t).x=n.data.x,n.y=n.data.y;do{a+=r[n.data.index]}while(n=n.next)}t.value=a}function c(t,i,u,l){if(!t.value)return!0;var h=t.x-n.x,f=t.y-n.y,c=l-i,y=h*h+f*f;if(c*c/a<y)return y<s&&(0===h&&(y+=(h=d())*h),0===f&&(y+=(f=d())*f),y<o&&(y=Math.sqrt(o*y)),n.vx+=h*t.value*e/y,n.vy+=f*t.value*e/y),!0;if(!(t.length||y>=s)){(t.data!==n||t.next)&&(0===h&&(y+=(h=d())*h),0===f&&(y+=(f=d())*f),y<o&&(y=Math.sqrt(o*y)));do{t.data!==n&&(c=r[t.data.index]*e/y,n.vx+=h*c,n.vy+=f*c)}while(t=t.next)}}return u.initialize=function(n){t=n,l()},u.strength=function(t){return arguments.length?(i="function"==typeof t?t:_(+t),l(),u):i},u.distanceMin=function(t){return arguments.length?(o=t*t,u):Math.sqrt(o)},u.distanceMax=function(t){return arguments.length?(s=t*t,u):Math.sqrt(s)},u.theta=function(t){return arguments.length?(a=t*t,u):Math.sqrt(a)},u};class Y{constructor(){this.onEvent=new o,this._nodes=[],this._links=[]}init(t){this._nodes=t.nodes,this._links=t.links,this._simulation=V(this._nodes).force("charge",X().strength(-1e3)).force("link",N(this._links).id(t=>t.id).distance(300)).force("center",s()).force("collision",g().radius(t=>t.size).iterations(2)).velocityDecay(.08).stop()}calculate(){for(let t=0,n=Math.ceil(Math.log(this._simulation.alphaMin())/Math.log(1-this._simulation.alphaDecay()));t<n;++t)this.onEvent.emit("tick",t/n),this._simulation.tick();this.onEvent.emit("end",{nodes:this._nodes,links:this._links})}destroy(){this._simulation.stop()}}const tt={useWebworker:!0};class nt{constructor(t){this.onEvent=new o,this._options={...tt,...t},this._options.useWorker?this._worker=new i.a:this._layout=new Y}init(t){this._options.useWorker?(this._worker.postMessage({height:t.height||0,links:t.links||[],name:"init",nodes:t.nodes||[],width:t.width||0}),this._worker.onmessage=(t=>{switch(t.data.type){case"tick":this.onEvent.emit("tick",t.data.progress);break;case"end":this.onEvent.emit("end",t.data.d)}})):(this._layout.init({height:t.height||0,links:t.links||[],nodes:t.nodes||[],width:t.width||0}),this._layout.onEvent.on("tick",t=>{this.onEvent.emit("tick",t)}),this._layout.onEvent.on("end",t=>{this.onEvent.emit("end",t)}))}calculate(){this._options.useWorker?this._worker.postMessage({name:"calculate"}):this._layout.calculate()}destroy(){this._options.useWorker&&this._worker?(this._worker.postMessage({name:"destroy"}),this._worker.terminate()):(this._layout.onEvent.removeAllListeners(),this._layout.destroy())}}e.d(n,"D3Layout",function(){return nt})}])});