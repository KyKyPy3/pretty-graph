!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define("d3Layout",[],n):"object"==typeof exports?exports.d3Layout=n():t.d3Layout=n()}("undefined"!=typeof self?self:this,(function(){return function(t){var n={};function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var i in t)e.d(r,i,function(n){return t[n]}.bind(null,i));return r},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=3)}([function(t,n,e){t.exports=function(){return e(2)('!function(t){var n={};function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var i in t)e.d(r,i,function(n){return t[n]}.bind(null,i));return r},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=1)}([,function(t,n,e){"use strict";e.r(n);function r(t,n,e,r){if(isNaN(n)||isNaN(e))return t;var i,o,u,a,s,f,l,h,c,y=t._root,v={data:r},p=t._x0,x=t._y0,_=t._x1,d=t._y1;if(!y)return t._root=v,t;for(;y.length;)if((f=n>=(o=(p+_)/2))?p=o:_=o,(l=e>=(u=(x+d)/2))?x=u:d=u,i=y,!(y=y[h=l<<1|f]))return i[h]=v,t;if(a=+t._x.call(null,y.data),s=+t._y.call(null,y.data),n===a&&e===s)return v.next=y,i?i[h]=v:t._root=v,t;do{i=i?i[h]=new Array(4):t._root=new Array(4),(f=n>=(o=(p+_)/2))?p=o:_=o,(l=e>=(u=(x+d)/2))?x=u:d=u}while((h=l<<1|f)==(c=(s>=u)<<1|a>=o));return i[c]=y,i[h]=v,t}var i=function(t,n,e,r,i){this.node=t,this.x0=n,this.y0=e,this.x1=r,this.y1=i};function o(t){return t[0]}function u(t){return t[1]}function a(t,n,e){var r=new s(null==n?o:n,null==e?u:e,NaN,NaN,NaN,NaN);return null==t?r:r.addAll(t)}function s(t,n,e,r,i,o){this._x=t,this._y=n,this._x0=e,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function f(t){for(var n={data:t.data},e=n;t=t.next;)e=e.next={data:t.data};return n}var l=a.prototype=s.prototype;l.copy=function(){var t,n,e=new s(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return e;if(!r.length)return e._root=f(r),e;for(t=[{source:r,target:e._root=new Array(4)}];r=t.pop();)for(var i=0;i<4;++i)(n=r.source[i])&&(n.length?t.push({source:n,target:r.target[i]=new Array(4)}):r.target[i]=f(n));return e},l.add=function(t){var n=+this._x.call(null,t),e=+this._y.call(null,t);return r(this.cover(n,e),n,e,t)},l.addAll=function(t){var n,e,i,o,u=t.length,a=new Array(u),s=new Array(u),f=1/0,l=1/0,h=-1/0,c=-1/0;for(e=0;e<u;++e)isNaN(i=+this._x.call(null,n=t[e]))||isNaN(o=+this._y.call(null,n))||(a[e]=i,s[e]=o,i<f&&(f=i),i>h&&(h=i),o<l&&(l=o),o>c&&(c=o));if(f>h||l>c)return this;for(this.cover(f,l).cover(h,c),e=0;e<u;++e)r(this,a[e],s[e],t[e]);return this},l.cover=function(t,n){if(isNaN(t=+t)||isNaN(n=+n))return this;var e=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(e))i=(e=Math.floor(t))+1,o=(r=Math.floor(n))+1;else{for(var u,a,s=i-e,f=this._root;e>t||t>=i||r>n||n>=o;)switch(a=(n<r)<<1|t<e,(u=new Array(4))[a]=f,f=u,s*=2,a){case 0:i=e+s,o=r+s;break;case 1:e=i-s,o=r+s;break;case 2:i=e+s,r=o-s;break;case 3:e=i-s,r=o-s}this._root&&this._root.length&&(this._root=f)}return this._x0=e,this._y0=r,this._x1=i,this._y1=o,this},l.data=function(){var t=[];return this.visit((function(n){if(!n.length)do{t.push(n.data)}while(n=n.next)})),t},l.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},l.find=function(t,n,e){var r,o,u,a,s,f,l,h=this._x0,c=this._y0,y=this._x1,v=this._y1,p=[],x=this._root;for(x&&p.push(new i(x,h,c,y,v)),null==e?e=1/0:(h=t-e,c=n-e,y=t+e,v=n+e,e*=e);f=p.pop();)if(!(!(x=f.node)||(o=f.x0)>y||(u=f.y0)>v||(a=f.x1)<h||(s=f.y1)<c))if(x.length){var _=(o+a)/2,d=(u+s)/2;p.push(new i(x[3],_,d,a,s),new i(x[2],o,d,_,s),new i(x[1],_,u,a,d),new i(x[0],o,u,_,d)),(l=(n>=d)<<1|t>=_)&&(f=p[p.length-1],p[p.length-1]=p[p.length-1-l],p[p.length-1-l]=f)}else{var g=t-+this._x.call(null,x.data),w=n-+this._y.call(null,x.data),m=g*g+w*w;if(m<e){var M=Math.sqrt(e=m);h=t-M,c=n-M,y=t+M,v=n+M,r=x.data}}return r},l.remove=function(t){if(isNaN(o=+this._x.call(null,t))||isNaN(u=+this._y.call(null,t)))return this;var n,e,r,i,o,u,a,s,f,l,h,c,y=this._root,v=this._x0,p=this._y0,x=this._x1,_=this._y1;if(!y)return this;if(y.length)for(;;){if((f=o>=(a=(v+x)/2))?v=a:x=a,(l=u>=(s=(p+_)/2))?p=s:_=s,n=y,!(y=y[h=l<<1|f]))return this;if(!y.length)break;(n[h+1&3]||n[h+2&3]||n[h+3&3])&&(e=n,c=h)}for(;y.data!==t;)if(r=y,!(y=y.next))return this;return(i=y.next)&&delete y.next,r?(i?r.next=i:delete r.next,this):n?(i?n[h]=i:delete n[h],(y=n[0]||n[1]||n[2]||n[3])&&y===(n[3]||n[2]||n[1]||n[0])&&!y.length&&(e?e[c]=y:this._root=y),this):(this._root=i,this)},l.removeAll=function(t){for(var n=0,e=t.length;n<e;++n)this.remove(t[n]);return this},l.root=function(){return this._root},l.size=function(){var t=0;return this.visit((function(n){if(!n.length)do{++t}while(n=n.next)})),t},l.visit=function(t){var n,e,r,o,u,a,s=[],f=this._root;for(f&&s.push(new i(f,this._x0,this._y0,this._x1,this._y1));n=s.pop();)if(!t(f=n.node,r=n.x0,o=n.y0,u=n.x1,a=n.y1)&&f.length){var l=(r+u)/2,h=(o+a)/2;(e=f[3])&&s.push(new i(e,l,h,u,a)),(e=f[2])&&s.push(new i(e,r,h,l,a)),(e=f[1])&&s.push(new i(e,l,o,u,h)),(e=f[0])&&s.push(new i(e,r,o,l,h))}return this},l.visitAfter=function(t){var n,e=[],r=[];for(this._root&&e.push(new i(this._root,this._x0,this._y0,this._x1,this._y1));n=e.pop();){var o=n.node;if(o.length){var u,a=n.x0,s=n.y0,f=n.x1,l=n.y1,h=(a+f)/2,c=(s+l)/2;(u=o[0])&&e.push(new i(u,a,s,h,c)),(u=o[1])&&e.push(new i(u,h,s,f,c)),(u=o[2])&&e.push(new i(u,a,c,h,l)),(u=o[3])&&e.push(new i(u,h,c,f,l))}r.push(n)}for(;n=r.pop();)t(n.node,n.x0,n.y0,n.x1,n.y1);return this},l.x=function(t){return arguments.length?(this._x=t,this):this._x},l.y=function(t){return arguments.length?(this._y=t,this):this._y};var h=function(t){return function(){return t}},c=function(){return 1e-6*(Math.random()-.5)};function y(t){return t.x+t.vx}function v(t){return t.y+t.vy}function p(t){return t.index}function x(t,n){var e=t.get(n);if(!e)throw new Error("missing: "+n);return e}var _={value:function(){}};function d(){for(var t,n=0,e=arguments.length,r={};n<e;++n){if(!(t=arguments[n]+"")||t in r||/[\\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new g(r)}function g(t){this._=t}function w(t,n){return t.trim().split(/^|\\s+/).map((function(t){var e="",r=t.indexOf(".");if(r>=0&&(e=t.slice(r+1),t=t.slice(0,r)),t&&!n.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}}))}function m(t,n){for(var e,r=0,i=t.length;r<i;++r)if((e=t[r]).name===n)return e.value}function M(t,n,e){for(var r=0,i=t.length;r<i;++r)if(t[r].name===n){t[r]=_,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=e&&t.push({name:n,value:e}),t}g.prototype=d.prototype={constructor:g,on:function(t,n){var e,r=this._,i=w(t+"",r),o=-1,u=i.length;if(!(arguments.length<2)){if(null!=n&&"function"!=typeof n)throw new Error("invalid callback: "+n);for(;++o<u;)if(e=(t=i[o]).type)r[e]=M(r[e],t.name,n);else if(null==n)for(e in r)r[e]=M(r[e],t.name,null);return this}for(;++o<u;)if((e=(t=i[o]).type)&&(e=m(r[e],t.name)))return e},copy:function(){var t={},n=this._;for(var e in n)t[e]=n[e].slice();return new g(t)},call:function(t,n){if((e=arguments.length-2)>0)for(var e,r,i=new Array(e),o=0;o<e;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,e=(r=this._[t]).length;o<e;++o)r[o].value.apply(n,i)},apply:function(t,n,e){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(n,e)}};var N,b,k=d,A=0,E=0,j=0,O=0,q=0,z=0,P="object"==typeof performance&&performance.now?performance:Date,D="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function T(){return q||(D(B),q=P.now()+z)}function B(){q=0}function L(){this._call=this._time=this._next=null}function S(t,n,e){var r=new L;return r.restart(t,n,e),r}function I(){q=(O=P.now())+z,A=E=0;try{!function(){T(),++A;for(var t,n=N;n;)(t=q-n._time)>=0&&n._call.call(null,t),n=n._next;--A}()}finally{A=0,function(){var t,n,e=N,r=1/0;for(;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:N=n);b=t,C(r)}(),q=0}}function F(){var t=P.now(),n=t-O;n>1e3&&(z-=n,O=t)}function C(t){A||(E&&(E=clearTimeout(E)),t-q>24?(t<1/0&&(E=setTimeout(I,t-P.now()-z)),j&&(j=clearInterval(j))):(j||(O=P.now(),j=setInterval(F,1e3)),A=1,D(I)))}function G(t){return t.x}function H(t){return t.y}L.prototype=S.prototype={constructor:L,restart:function(t,n,e){if("function"!=typeof t)throw new TypeError("callback is not a function");e=(null==e?T():+e)+(null==n?0:+n),this._next||b===this||(b?b._next=this:N=this,b=this),this._call=t,this._time=e,C()},stop:function(){this._call&&(this._call=null,this._time=1/0,C())}};var J=Math.PI*(3-Math.sqrt(5)),K=function(){for(var t=0,n=0,e=arguments.length;n<e;n++)t+=arguments[n].length;var r=Array(t),i=0;for(n=0;n<e;n++)for(var o=arguments[n],u=0,a=o.length;u<a;u++,i++)r[i]=o[u];return r},Q=function(){function t(){this.events={}}return t.prototype.on=function(t,n){var e=this;return"object"!=typeof this.events[t]&&(this.events[t]=[]),this.events[t].push(n),function(){return e.removeListener(t,n)}},t.prototype.removeListener=function(t,n){if("object"==typeof this.events[t]){var e=this.events[t].indexOf(n);e>-1&&this.events[t].splice(e,1)}},t.prototype.removeAllListeners=function(){var t=this;Object.keys(this.events).forEach((function(n){return t.events[n].splice(0,t.events[n].length)}))},t.prototype.emit=function(t){for(var n=this,e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];"object"==typeof this.events[t]&&K(this.events[t]).forEach((function(t){return t.apply(n,e)}))},t.prototype.once=function(t,n){var e=this,r=this.on(t,(function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];r(),n.apply(e,t)}));return r},t}(),R=function(){function t(){this.onEvent=new Q,this._nodes=[],this._links=[],this._options={}}return t.prototype.init=function(t){this._nodes=t.nodes,this._links=t.links,this._options=t.layoutOptions;var n=function(){var t,n,e,r,i=h(-30),o=1,u=1/0,s=.81;function f(r){var i,o=t.length,u=a(t,G,H).visitAfter(y);for(e=r,i=0;i<o;++i)n=t[i],u.visit(v)}function l(){if(t){var n,e,o=t.length;for(r=new Array(o),n=0;n<o;++n)e=t[n],r[e.index]=+i(e,n,t)}}function y(t){var n,e,i,o,u,a=0,s=0;if(t.length){for(i=o=u=0;u<4;++u)(n=t[u])&&(e=Math.abs(n.value))&&(a+=n.value,s+=e,i+=e*n.x,o+=e*n.y);t.x=i/s,t.y=o/s}else{(n=t).x=n.data.x,n.y=n.data.y;do{a+=r[n.data.index]}while(n=n.next)}t.value=a}function v(t,i,a,f){if(!t.value)return!0;var l=t.x-n.x,h=t.y-n.y,y=f-i,v=l*l+h*h;if(y*y/s<v)return v<u&&(0===l&&(v+=(l=c())*l),0===h&&(v+=(h=c())*h),v<o&&(v=Math.sqrt(o*v)),n.vx+=l*t.value*e/v,n.vy+=h*t.value*e/v),!0;if(!(t.length||v>=u)){(t.data!==n||t.next)&&(0===l&&(v+=(l=c())*l),0===h&&(v+=(h=c())*h),v<o&&(v=Math.sqrt(o*v)));do{t.data!==n&&(y=r[t.data.index]*e/v,n.vx+=l*y,n.vy+=h*y)}while(t=t.next)}}return f.initialize=function(n){t=n,l()},f.strength=function(t){return arguments.length?(i="function"==typeof t?t:h(+t),l(),f):i},f.distanceMin=function(t){return arguments.length?(o=t*t,f):Math.sqrt(o)},f.distanceMax=function(t){return arguments.length?(u=t*t,f):Math.sqrt(u)},f.theta=function(t){return arguments.length?(s=t*t,f):Math.sqrt(s)},f}(),e=function(t){var n,e,r,i,o,u=p,a=function(t){return 1/Math.min(i[t.source.index],i[t.target.index])},s=h(30),f=1;function l(r){for(var i=0,u=t.length;i<f;++i)for(var a,s,l,h,y,v,p,x=0;x<u;++x)s=(a=t[x]).source,h=(l=a.target).x+l.vx-s.x-s.vx||c(),y=l.y+l.vy-s.y-s.vy||c(),h*=v=((v=Math.sqrt(h*h+y*y))-e[x])/v*r*n[x],y*=v,l.vx-=h*(p=o[x]),l.vy-=y*p,s.vx+=h*(p=1-p),s.vy+=y*p}function y(){if(r){var a,s,f=r.length,l=t.length,h=new Map(r.map((t,n)=>[u(t,n,r),t]));for(a=0,i=new Array(f);a<l;++a)(s=t[a]).index=a,"object"!=typeof s.source&&(s.source=x(h,s.source)),"object"!=typeof s.target&&(s.target=x(h,s.target)),i[s.source.index]=(i[s.source.index]||0)+1,i[s.target.index]=(i[s.target.index]||0)+1;for(a=0,o=new Array(l);a<l;++a)s=t[a],o[a]=i[s.source.index]/(i[s.source.index]+i[s.target.index]);n=new Array(l),v(),e=new Array(l),_()}}function v(){if(r)for(var e=0,i=t.length;e<i;++e)n[e]=+a(t[e],e,t)}function _(){if(r)for(var n=0,i=t.length;n<i;++n)e[n]=+s(t[n],n,t)}return null==t&&(t=[]),l.initialize=function(t){r=t,y()},l.links=function(n){return arguments.length?(t=n,y(),l):t},l.id=function(t){return arguments.length?(u=t,l):u},l.iterations=function(t){return arguments.length?(f=+t,l):f},l.strength=function(t){return arguments.length?(a="function"==typeof t?t:h(+t),v(),l):a},l.distance=function(t){return arguments.length?(s="function"==typeof t?t:h(+t),_(),l):s},l}(this._links).id((function(t){return t.id}));this._options.mainBody.strength&&(n=n.strength(this._options.mainBody.strength)),this._options.mainBody.distanceMin&&(n=n.distanceMin(this._options.mainBody.distanceMin)),this._options.mainBody.distanceMax&&(n=n.distanceMax(this._options.mainBody.distanceMax)),this._options.linkDistance&&(e=e.distance(this._options.linkDistance)),this._simulation=function(t){var n,e=1,r=.001,i=1-Math.pow(r,1/300),o=0,u=.6,a=new Map,s=S(l),f=k("tick","end");function l(){h(),f.call("tick",n),e<r&&(s.stop(),f.call("end",n))}function h(r){var s,f,l=t.length;void 0===r&&(r=1);for(var h=0;h<r;++h)for(e+=(o-e)*i,a.forEach((function(t){t(e)})),s=0;s<l;++s)null==(f=t[s]).fx?f.x+=f.vx*=u:(f.x=f.fx,f.vx=0),null==f.fy?f.y+=f.vy*=u:(f.y=f.fy,f.vy=0);return n}function c(){for(var n,e=0,r=t.length;e<r;++e){if((n=t[e]).index=e,null!=n.fx&&(n.x=n.fx),null!=n.fy&&(n.y=n.fy),isNaN(n.x)||isNaN(n.y)){var i=10*Math.sqrt(e),o=e*J;n.x=i*Math.cos(o),n.y=i*Math.sin(o)}(isNaN(n.vx)||isNaN(n.vy))&&(n.vx=n.vy=0)}}function y(n){return n.initialize&&n.initialize(t),n}return null==t&&(t=[]),c(),n={tick:h,restart:function(){return s.restart(l),n},stop:function(){return s.stop(),n},nodes:function(e){return arguments.length?(t=e,c(),a.forEach(y),n):t},alpha:function(t){return arguments.length?(e=+t,n):e},alphaMin:function(t){return arguments.length?(r=+t,n):r},alphaDecay:function(t){return arguments.length?(i=+t,n):+i},alphaTarget:function(t){return arguments.length?(o=+t,n):o},velocityDecay:function(t){return arguments.length?(u=1-t,n):1-u},force:function(t,e){return arguments.length>1?(null==e?a.delete(t):a.set(t,y(e)),n):a.get(t)},find:function(n,e,r){var i,o,u,a,s,f=0,l=t.length;for(null==r?r=1/0:r*=r,f=0;f<l;++f)(u=(i=n-(a=t[f]).x)*i+(o=e-a.y)*o)<r&&(s=a,r=u);return s},on:function(t,e){return arguments.length>1?(f.on(t,e),n):f.on(t)}}}(this._nodes).force("charge",n).force("link",e).force("center",function(t,n){var e;function r(){var r,i,o=e.length,u=0,a=0;for(r=0;r<o;++r)u+=(i=e[r]).x,a+=i.y;for(u=u/o-t,a=a/o-n,r=0;r<o;++r)(i=e[r]).x-=u,i.y-=a}return null==t&&(t=0),null==n&&(n=0),r.initialize=function(t){e=t},r.x=function(n){return arguments.length?(t=+n,r):t},r.y=function(t){return arguments.length?(n=+t,r):n},r}()).force("x",function(t){var n,e,r,i=h(.1);function o(t){for(var i,o=0,u=n.length;o<u;++o)(i=n[o]).vx+=(r[o]-i.x)*e[o]*t}function u(){if(n){var o,u=n.length;for(e=new Array(u),r=new Array(u),o=0;o<u;++o)e[o]=isNaN(r[o]=+t(n[o],o,n))?0:+i(n[o],o,n)}}return"function"!=typeof t&&(t=h(null==t?0:+t)),o.initialize=function(t){n=t,u()},o.strength=function(t){return arguments.length?(i="function"==typeof t?t:h(+t),u(),o):i},o.x=function(n){return arguments.length?(t="function"==typeof n?n:h(+n),u(),o):t},o}().strength(.1)).force("y",function(t){var n,e,r,i=h(.1);function o(t){for(var i,o=0,u=n.length;o<u;++o)(i=n[o]).vy+=(r[o]-i.y)*e[o]*t}function u(){if(n){var o,u=n.length;for(e=new Array(u),r=new Array(u),o=0;o<u;++o)e[o]=isNaN(r[o]=+t(n[o],o,n))?0:+i(n[o],o,n)}}return"function"!=typeof t&&(t=h(null==t?0:+t)),o.initialize=function(t){n=t,u()},o.strength=function(t){return arguments.length?(i="function"==typeof t?t:h(+t),u(),o):i},o.y=function(n){return arguments.length?(t="function"==typeof n?n:h(+n),u(),o):t},o}().strength(.1)).force("collision",function(t){var n,e,r=1,i=1;function o(){for(var t,o,s,f,l,h,p,x=n.length,_=0;_<i;++_)for(o=a(n,y,v).visitAfter(u),t=0;t<x;++t)s=n[t],h=e[s.index],p=h*h,f=s.x+s.vx,l=s.y+s.vy,o.visit(d);function d(t,n,e,i,o){var u=t.data,a=t.r,y=h+a;if(!u)return n>f+y||i<f-y||e>l+y||o<l-y;if(u.index>s.index){var v=f-u.x-u.vx,x=l-u.y-u.vy,_=v*v+x*x;_<y*y&&(0===v&&(_+=(v=c())*v),0===x&&(_+=(x=c())*x),_=(y-(_=Math.sqrt(_)))/_*r,s.vx+=(v*=_)*(y=(a*=a)/(p+a)),s.vy+=(x*=_)*y,u.vx-=v*(y=1-y),u.vy-=x*y)}}}function u(t){if(t.data)return t.r=e[t.data.index];for(var n=t.r=0;n<4;++n)t[n]&&t[n].r>t.r&&(t.r=t[n].r)}function s(){if(n){var r,i,o=n.length;for(e=new Array(o),r=0;r<o;++r)i=n[r],e[i.index]=+t(i,r,n)}}return"function"!=typeof t&&(t=h(null==t?1:+t)),o.initialize=function(t){n=t,s()},o.iterations=function(t){return arguments.length?(i=+t,o):i},o.strength=function(t){return arguments.length?(r=+t,o):r},o.radius=function(n){return arguments.length?(t="function"==typeof n?n:h(+n),s(),o):t},o}().radius((function(t){return t.size})).iterations(2)).velocityDecay(.08).stop()},t.prototype.calculate=function(){for(var t=0,n=Math.ceil(Math.log(this._simulation.alphaMin())/Math.log(1-this._simulation.alphaDecay()));t<n;++t)this.onEvent.emit("tick",t/n),this._simulation.tick();this.onEvent.emit("end",{nodes:this._nodes,links:this._links})},t.prototype.destroy=function(){this._simulation.stop(),this._simulation=null,this._links=[],this._nodes=[]},t}(),U=self,V=null;U.addEventListener("message",(function(t){var n=t.data;switch(n.name){case"init":(V=new R).onEvent.on("tick",(function(t){U.postMessage({type:"tick",progress:t})})),V.onEvent.on("end",(function(t){U.postMessage({type:"end",d:t})})),V.init(n);break;case"calculate":V&&V.calculate();break;case"destroy":V&&(V.onEvent.removeAllListeners(),V.destroy()),V=null}}));n.default=null}]);',null)}},,function(t,n,e){"use strict";var r=window.URL||window.webkitURL;t.exports=function(t,n){try{try{var e;try{(e=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder)).append(t),e=e.getBlob()}catch(n){e=new Blob([t])}return new Worker(r.createObjectURL(e))}catch(n){return new Worker("data:application/javascript,"+encodeURIComponent(t))}}catch(t){if(!n)throw Error("Inline worker is not supported");return new Worker(n)}}},function(t,n,e){"use strict";e.r(n);var r=e(0),i=e.n(r),o=function(){for(var t=0,n=0,e=arguments.length;n<e;n++)t+=arguments[n].length;var r=Array(t),i=0;for(n=0;n<e;n++)for(var o=arguments[n],u=0,s=o.length;u<s;u++,i++)r[i]=o[u];return r},u=function(){function t(){this.events={}}return t.prototype.on=function(t,n){var e=this;return"object"!=typeof this.events[t]&&(this.events[t]=[]),this.events[t].push(n),function(){return e.removeListener(t,n)}},t.prototype.removeListener=function(t,n){if("object"==typeof this.events[t]){var e=this.events[t].indexOf(n);e>-1&&this.events[t].splice(e,1)}},t.prototype.removeAllListeners=function(){var t=this;Object.keys(this.events).forEach((function(n){return t.events[n].splice(0,t.events[n].length)}))},t.prototype.emit=function(t){for(var n=this,e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];"object"==typeof this.events[t]&&o(this.events[t]).forEach((function(t){return t.apply(n,e)}))},t.prototype.once=function(t,n){var e=this,r=this.on(t,(function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];r(),n.apply(e,t)}));return r},t}();function s(t,n,e,r){if(isNaN(n)||isNaN(e))return t;var i,o,u,s,a,l,f,h,c,y=t._root,v={data:r},p=t._x0,_=t._y0,d=t._x1,x=t._y1;if(!y)return t._root=v,t;for(;y.length;)if((l=n>=(o=(p+d)/2))?p=o:d=o,(f=e>=(u=(_+x)/2))?_=u:x=u,i=y,!(y=y[h=f<<1|l]))return i[h]=v,t;if(s=+t._x.call(null,y.data),a=+t._y.call(null,y.data),n===s&&e===a)return v.next=y,i?i[h]=v:t._root=v,t;do{i=i?i[h]=new Array(4):t._root=new Array(4),(l=n>=(o=(p+d)/2))?p=o:d=o,(f=e>=(u=(_+x)/2))?_=u:x=u}while((h=f<<1|l)==(c=(a>=u)<<1|s>=o));return i[c]=y,i[h]=v,t}var a=function(t,n,e,r,i){this.node=t,this.x0=n,this.y0=e,this.x1=r,this.y1=i};function l(t){return t[0]}function f(t){return t[1]}function h(t,n,e){var r=new c(null==n?l:n,null==e?f:e,NaN,NaN,NaN,NaN);return null==t?r:r.addAll(t)}function c(t,n,e,r,i,o){this._x=t,this._y=n,this._x0=e,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function y(t){for(var n={data:t.data},e=n;t=t.next;)e=e.next={data:t.data};return n}var v=h.prototype=c.prototype;v.copy=function(){var t,n,e=new c(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return e;if(!r.length)return e._root=y(r),e;for(t=[{source:r,target:e._root=new Array(4)}];r=t.pop();)for(var i=0;i<4;++i)(n=r.source[i])&&(n.length?t.push({source:n,target:r.target[i]=new Array(4)}):r.target[i]=y(n));return e},v.add=function(t){var n=+this._x.call(null,t),e=+this._y.call(null,t);return s(this.cover(n,e),n,e,t)},v.addAll=function(t){var n,e,r,i,o=t.length,u=new Array(o),a=new Array(o),l=1/0,f=1/0,h=-1/0,c=-1/0;for(e=0;e<o;++e)isNaN(r=+this._x.call(null,n=t[e]))||isNaN(i=+this._y.call(null,n))||(u[e]=r,a[e]=i,r<l&&(l=r),r>h&&(h=r),i<f&&(f=i),i>c&&(c=i));if(l>h||f>c)return this;for(this.cover(l,f).cover(h,c),e=0;e<o;++e)s(this,u[e],a[e],t[e]);return this},v.cover=function(t,n){if(isNaN(t=+t)||isNaN(n=+n))return this;var e=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(e))i=(e=Math.floor(t))+1,o=(r=Math.floor(n))+1;else{for(var u,s,a=i-e,l=this._root;e>t||t>=i||r>n||n>=o;)switch(s=(n<r)<<1|t<e,(u=new Array(4))[s]=l,l=u,a*=2,s){case 0:i=e+a,o=r+a;break;case 1:e=i-a,o=r+a;break;case 2:i=e+a,r=o-a;break;case 3:e=i-a,r=o-a}this._root&&this._root.length&&(this._root=l)}return this._x0=e,this._y0=r,this._x1=i,this._y1=o,this},v.data=function(){var t=[];return this.visit((function(n){if(!n.length)do{t.push(n.data)}while(n=n.next)})),t},v.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},v.find=function(t,n,e){var r,i,o,u,s,l,f,h=this._x0,c=this._y0,y=this._x1,v=this._y1,p=[],_=this._root;for(_&&p.push(new a(_,h,c,y,v)),null==e?e=1/0:(h=t-e,c=n-e,y=t+e,v=n+e,e*=e);l=p.pop();)if(!(!(_=l.node)||(i=l.x0)>y||(o=l.y0)>v||(u=l.x1)<h||(s=l.y1)<c))if(_.length){var d=(i+u)/2,x=(o+s)/2;p.push(new a(_[3],d,x,u,s),new a(_[2],i,x,d,s),new a(_[1],d,o,u,x),new a(_[0],i,o,d,x)),(f=(n>=x)<<1|t>=d)&&(l=p[p.length-1],p[p.length-1]=p[p.length-1-f],p[p.length-1-f]=l)}else{var g=t-+this._x.call(null,_.data),w=n-+this._y.call(null,_.data),m=g*g+w*w;if(m<e){var M=Math.sqrt(e=m);h=t-M,c=n-M,y=t+M,v=n+M,r=_.data}}return r},v.remove=function(t){if(isNaN(o=+this._x.call(null,t))||isNaN(u=+this._y.call(null,t)))return this;var n,e,r,i,o,u,s,a,l,f,h,c,y=this._root,v=this._x0,p=this._y0,_=this._x1,d=this._y1;if(!y)return this;if(y.length)for(;;){if((l=o>=(s=(v+_)/2))?v=s:_=s,(f=u>=(a=(p+d)/2))?p=a:d=a,n=y,!(y=y[h=f<<1|l]))return this;if(!y.length)break;(n[h+1&3]||n[h+2&3]||n[h+3&3])&&(e=n,c=h)}for(;y.data!==t;)if(r=y,!(y=y.next))return this;return(i=y.next)&&delete y.next,r?(i?r.next=i:delete r.next,this):n?(i?n[h]=i:delete n[h],(y=n[0]||n[1]||n[2]||n[3])&&y===(n[3]||n[2]||n[1]||n[0])&&!y.length&&(e?e[c]=y:this._root=y),this):(this._root=i,this)},v.removeAll=function(t){for(var n=0,e=t.length;n<e;++n)this.remove(t[n]);return this},v.root=function(){return this._root},v.size=function(){var t=0;return this.visit((function(n){if(!n.length)do{++t}while(n=n.next)})),t},v.visit=function(t){var n,e,r,i,o,u,s=[],l=this._root;for(l&&s.push(new a(l,this._x0,this._y0,this._x1,this._y1));n=s.pop();)if(!t(l=n.node,r=n.x0,i=n.y0,o=n.x1,u=n.y1)&&l.length){var f=(r+o)/2,h=(i+u)/2;(e=l[3])&&s.push(new a(e,f,h,o,u)),(e=l[2])&&s.push(new a(e,r,h,f,u)),(e=l[1])&&s.push(new a(e,f,i,o,h)),(e=l[0])&&s.push(new a(e,r,i,f,h))}return this},v.visitAfter=function(t){var n,e=[],r=[];for(this._root&&e.push(new a(this._root,this._x0,this._y0,this._x1,this._y1));n=e.pop();){var i=n.node;if(i.length){var o,u=n.x0,s=n.y0,l=n.x1,f=n.y1,h=(u+l)/2,c=(s+f)/2;(o=i[0])&&e.push(new a(o,u,s,h,c)),(o=i[1])&&e.push(new a(o,h,s,l,c)),(o=i[2])&&e.push(new a(o,u,c,h,f)),(o=i[3])&&e.push(new a(o,h,c,l,f))}r.push(n)}for(;n=r.pop();)t(n.node,n.x0,n.y0,n.x1,n.y1);return this},v.x=function(t){return arguments.length?(this._x=t,this):this._x},v.y=function(t){return arguments.length?(this._y=t,this):this._y};var p=function(t){return function(){return t}},_=function(){return 1e-6*(Math.random()-.5)};function d(t){return t.x+t.vx}function x(t){return t.y+t.vy}function g(t){return t.index}function w(t,n){var e=t.get(n);if(!e)throw new Error("missing: "+n);return e}var m={value:function(){}};function M(){for(var t,n=0,e=arguments.length,r={};n<e;++n){if(!(t=arguments[n]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new k(r)}function k(t){this._=t}function N(t,n){return t.trim().split(/^|\s+/).map((function(t){var e="",r=t.indexOf(".");if(r>=0&&(e=t.slice(r+1),t=t.slice(0,r)),t&&!n.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}}))}function b(t,n){for(var e,r=0,i=t.length;r<i;++r)if((e=t[r]).name===n)return e.value}function A(t,n,e){for(var r=0,i=t.length;r<i;++r)if(t[r].name===n){t[r]=m,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=e&&t.push({name:n,value:e}),t}k.prototype=M.prototype={constructor:k,on:function(t,n){var e,r=this._,i=N(t+"",r),o=-1,u=i.length;if(!(arguments.length<2)){if(null!=n&&"function"!=typeof n)throw new Error("invalid callback: "+n);for(;++o<u;)if(e=(t=i[o]).type)r[e]=A(r[e],t.name,n);else if(null==n)for(e in r)r[e]=A(r[e],t.name,null);return this}for(;++o<u;)if((e=(t=i[o]).type)&&(e=b(r[e],t.name)))return e},copy:function(){var t={},n=this._;for(var e in n)t[e]=n[e].slice();return new k(t)},call:function(t,n){if((e=arguments.length-2)>0)for(var e,r,i=new Array(e),o=0;o<e;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,e=(r=this._[t]).length;o<e;++o)r[o].value.apply(n,i)},apply:function(t,n,e){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(n,e)}};var E,j,O=M,q=0,z=0,B=0,P=0,L=0,D=0,T="object"==typeof performance&&performance.now?performance:Date,S="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function I(){return L||(S(V),L=T.now()+D)}function V(){L=0}function W(){this._call=this._time=this._next=null}function U(t,n,e){var r=new W;return r.restart(t,n,e),r}function F(){L=(P=T.now())+D,q=z=0;try{!function(){I(),++q;for(var t,n=E;n;)(t=L-n._time)>=0&&n._call.call(null,t),n=n._next;--q}()}finally{q=0,function(){var t,n,e=E,r=1/0;for(;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:E=n);j=t,C(r)}(),L=0}}function R(){var t=T.now(),n=t-P;n>1e3&&(D-=n,P=t)}function C(t){q||(z&&(z=clearTimeout(z)),t-L>24?(t<1/0&&(z=setTimeout(F,t-T.now()-D)),B&&(B=clearInterval(B))):(B||(P=T.now(),B=setInterval(R,1e3)),q=1,S(F)))}function K(t){return t.x}function G(t){return t.y}W.prototype=U.prototype={constructor:W,restart:function(t,n,e){if("function"!=typeof t)throw new TypeError("callback is not a function");e=(null==e?I():+e)+(null==n?0:+n),this._next||j===this||(j?j._next=this:E=this,j=this),this._call=t,this._time=e,C()},stop:function(){this._call&&(this._call=null,this._time=1/0,C())}};var H=Math.PI*(3-Math.sqrt(5)),J=function(){function t(){this.onEvent=new u,this._nodes=[],this._links=[],this._options={}}return t.prototype.init=function(t){this._nodes=t.nodes,this._links=t.links,this._options=t.layoutOptions;var n=function(){var t,n,e,r,i=p(-30),o=1,u=1/0,s=.81;function a(r){var i,o=t.length,u=h(t,K,G).visitAfter(f);for(e=r,i=0;i<o;++i)n=t[i],u.visit(c)}function l(){if(t){var n,e,o=t.length;for(r=new Array(o),n=0;n<o;++n)e=t[n],r[e.index]=+i(e,n,t)}}function f(t){var n,e,i,o,u,s=0,a=0;if(t.length){for(i=o=u=0;u<4;++u)(n=t[u])&&(e=Math.abs(n.value))&&(s+=n.value,a+=e,i+=e*n.x,o+=e*n.y);t.x=i/a,t.y=o/a}else{(n=t).x=n.data.x,n.y=n.data.y;do{s+=r[n.data.index]}while(n=n.next)}t.value=s}function c(t,i,a,l){if(!t.value)return!0;var f=t.x-n.x,h=t.y-n.y,c=l-i,y=f*f+h*h;if(c*c/s<y)return y<u&&(0===f&&(y+=(f=_())*f),0===h&&(y+=(h=_())*h),y<o&&(y=Math.sqrt(o*y)),n.vx+=f*t.value*e/y,n.vy+=h*t.value*e/y),!0;if(!(t.length||y>=u)){(t.data!==n||t.next)&&(0===f&&(y+=(f=_())*f),0===h&&(y+=(h=_())*h),y<o&&(y=Math.sqrt(o*y)));do{t.data!==n&&(c=r[t.data.index]*e/y,n.vx+=f*c,n.vy+=h*c)}while(t=t.next)}}return a.initialize=function(n){t=n,l()},a.strength=function(t){return arguments.length?(i="function"==typeof t?t:p(+t),l(),a):i},a.distanceMin=function(t){return arguments.length?(o=t*t,a):Math.sqrt(o)},a.distanceMax=function(t){return arguments.length?(u=t*t,a):Math.sqrt(u)},a.theta=function(t){return arguments.length?(s=t*t,a):Math.sqrt(s)},a}(),e=function(t){var n,e,r,i,o,u=g,s=function(t){return 1/Math.min(i[t.source.index],i[t.target.index])},a=p(30),l=1;function f(r){for(var i=0,u=t.length;i<l;++i)for(var s,a,f,h,c,y,v,p=0;p<u;++p)a=(s=t[p]).source,h=(f=s.target).x+f.vx-a.x-a.vx||_(),c=f.y+f.vy-a.y-a.vy||_(),h*=y=((y=Math.sqrt(h*h+c*c))-e[p])/y*r*n[p],c*=y,f.vx-=h*(v=o[p]),f.vy-=c*v,a.vx+=h*(v=1-v),a.vy+=c*v}function h(){if(r){var s,a,l=r.length,f=t.length,h=new Map(r.map((t,n)=>[u(t,n,r),t]));for(s=0,i=new Array(l);s<f;++s)(a=t[s]).index=s,"object"!=typeof a.source&&(a.source=w(h,a.source)),"object"!=typeof a.target&&(a.target=w(h,a.target)),i[a.source.index]=(i[a.source.index]||0)+1,i[a.target.index]=(i[a.target.index]||0)+1;for(s=0,o=new Array(f);s<f;++s)a=t[s],o[s]=i[a.source.index]/(i[a.source.index]+i[a.target.index]);n=new Array(f),c(),e=new Array(f),y()}}function c(){if(r)for(var e=0,i=t.length;e<i;++e)n[e]=+s(t[e],e,t)}function y(){if(r)for(var n=0,i=t.length;n<i;++n)e[n]=+a(t[n],n,t)}return null==t&&(t=[]),f.initialize=function(t){r=t,h()},f.links=function(n){return arguments.length?(t=n,h(),f):t},f.id=function(t){return arguments.length?(u=t,f):u},f.iterations=function(t){return arguments.length?(l=+t,f):l},f.strength=function(t){return arguments.length?(s="function"==typeof t?t:p(+t),c(),f):s},f.distance=function(t){return arguments.length?(a="function"==typeof t?t:p(+t),y(),f):a},f}(this._links).id((function(t){return t.id}));this._options.mainBody.strength&&(n=n.strength(this._options.mainBody.strength)),this._options.mainBody.distanceMin&&(n=n.distanceMin(this._options.mainBody.distanceMin)),this._options.mainBody.distanceMax&&(n=n.distanceMax(this._options.mainBody.distanceMax)),this._options.linkDistance&&(e=e.distance(this._options.linkDistance)),this._simulation=function(t){var n,e=1,r=.001,i=1-Math.pow(r,1/300),o=0,u=.6,s=new Map,a=U(f),l=O("tick","end");function f(){h(),l.call("tick",n),e<r&&(a.stop(),l.call("end",n))}function h(r){var a,l,f=t.length;void 0===r&&(r=1);for(var h=0;h<r;++h)for(e+=(o-e)*i,s.forEach((function(t){t(e)})),a=0;a<f;++a)null==(l=t[a]).fx?l.x+=l.vx*=u:(l.x=l.fx,l.vx=0),null==l.fy?l.y+=l.vy*=u:(l.y=l.fy,l.vy=0);return n}function c(){for(var n,e=0,r=t.length;e<r;++e){if((n=t[e]).index=e,null!=n.fx&&(n.x=n.fx),null!=n.fy&&(n.y=n.fy),isNaN(n.x)||isNaN(n.y)){var i=10*Math.sqrt(e),o=e*H;n.x=i*Math.cos(o),n.y=i*Math.sin(o)}(isNaN(n.vx)||isNaN(n.vy))&&(n.vx=n.vy=0)}}function y(n){return n.initialize&&n.initialize(t),n}return null==t&&(t=[]),c(),n={tick:h,restart:function(){return a.restart(f),n},stop:function(){return a.stop(),n},nodes:function(e){return arguments.length?(t=e,c(),s.forEach(y),n):t},alpha:function(t){return arguments.length?(e=+t,n):e},alphaMin:function(t){return arguments.length?(r=+t,n):r},alphaDecay:function(t){return arguments.length?(i=+t,n):+i},alphaTarget:function(t){return arguments.length?(o=+t,n):o},velocityDecay:function(t){return arguments.length?(u=1-t,n):1-u},force:function(t,e){return arguments.length>1?(null==e?s.delete(t):s.set(t,y(e)),n):s.get(t)},find:function(n,e,r){var i,o,u,s,a,l=0,f=t.length;for(null==r?r=1/0:r*=r,l=0;l<f;++l)(u=(i=n-(s=t[l]).x)*i+(o=e-s.y)*o)<r&&(a=s,r=u);return a},on:function(t,e){return arguments.length>1?(l.on(t,e),n):l.on(t)}}}(this._nodes).force("charge",n).force("link",e).force("center",function(t,n){var e;function r(){var r,i,o=e.length,u=0,s=0;for(r=0;r<o;++r)u+=(i=e[r]).x,s+=i.y;for(u=u/o-t,s=s/o-n,r=0;r<o;++r)(i=e[r]).x-=u,i.y-=s}return null==t&&(t=0),null==n&&(n=0),r.initialize=function(t){e=t},r.x=function(n){return arguments.length?(t=+n,r):t},r.y=function(t){return arguments.length?(n=+t,r):n},r}()).force("x",function(t){var n,e,r,i=p(.1);function o(t){for(var i,o=0,u=n.length;o<u;++o)(i=n[o]).vx+=(r[o]-i.x)*e[o]*t}function u(){if(n){var o,u=n.length;for(e=new Array(u),r=new Array(u),o=0;o<u;++o)e[o]=isNaN(r[o]=+t(n[o],o,n))?0:+i(n[o],o,n)}}return"function"!=typeof t&&(t=p(null==t?0:+t)),o.initialize=function(t){n=t,u()},o.strength=function(t){return arguments.length?(i="function"==typeof t?t:p(+t),u(),o):i},o.x=function(n){return arguments.length?(t="function"==typeof n?n:p(+n),u(),o):t},o}().strength(.1)).force("y",function(t){var n,e,r,i=p(.1);function o(t){for(var i,o=0,u=n.length;o<u;++o)(i=n[o]).vy+=(r[o]-i.y)*e[o]*t}function u(){if(n){var o,u=n.length;for(e=new Array(u),r=new Array(u),o=0;o<u;++o)e[o]=isNaN(r[o]=+t(n[o],o,n))?0:+i(n[o],o,n)}}return"function"!=typeof t&&(t=p(null==t?0:+t)),o.initialize=function(t){n=t,u()},o.strength=function(t){return arguments.length?(i="function"==typeof t?t:p(+t),u(),o):i},o.y=function(n){return arguments.length?(t="function"==typeof n?n:p(+n),u(),o):t},o}().strength(.1)).force("collision",function(t){var n,e,r=1,i=1;function o(){for(var t,o,s,a,l,f,c,y=n.length,v=0;v<i;++v)for(o=h(n,d,x).visitAfter(u),t=0;t<y;++t)s=n[t],f=e[s.index],c=f*f,a=s.x+s.vx,l=s.y+s.vy,o.visit(p);function p(t,n,e,i,o){var u=t.data,h=t.r,y=f+h;if(!u)return n>a+y||i<a-y||e>l+y||o<l-y;if(u.index>s.index){var v=a-u.x-u.vx,p=l-u.y-u.vy,d=v*v+p*p;d<y*y&&(0===v&&(d+=(v=_())*v),0===p&&(d+=(p=_())*p),d=(y-(d=Math.sqrt(d)))/d*r,s.vx+=(v*=d)*(y=(h*=h)/(c+h)),s.vy+=(p*=d)*y,u.vx-=v*(y=1-y),u.vy-=p*y)}}}function u(t){if(t.data)return t.r=e[t.data.index];for(var n=t.r=0;n<4;++n)t[n]&&t[n].r>t.r&&(t.r=t[n].r)}function s(){if(n){var r,i,o=n.length;for(e=new Array(o),r=0;r<o;++r)i=n[r],e[i.index]=+t(i,r,n)}}return"function"!=typeof t&&(t=p(null==t?1:+t)),o.initialize=function(t){n=t,s()},o.iterations=function(t){return arguments.length?(i=+t,o):i},o.strength=function(t){return arguments.length?(r=+t,o):r},o.radius=function(n){return arguments.length?(t="function"==typeof n?n:p(+n),s(),o):t},o}().radius((function(t){return t.size})).iterations(2)).velocityDecay(.08).stop()},t.prototype.calculate=function(){for(var t=0,n=Math.ceil(Math.log(this._simulation.alphaMin())/Math.log(1-this._simulation.alphaDecay()));t<n;++t)this.onEvent.emit("tick",t/n),this._simulation.tick();this.onEvent.emit("end",{nodes:this._nodes,links:this._links})},t.prototype.destroy=function(){this._simulation.stop(),this._simulation=null,this._links=[],this._nodes=[]},t}(),Q={layoutOptions:{linkDistance:300,mainBody:{distanceMin:1,strength:-1e3}},useWebworker:!0},X=function(){return(X=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var i in n=arguments[e])Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t}).apply(this,arguments)},Y=function(){function t(t){this.onEvent=new u,this._options=X(X({},Q),t),this._options.useWorker?this._worker=new i.a:this._layout=new J}return t.prototype.init=function(t){var n=this;this._options.useWorker&&this._worker?(this._worker.postMessage({height:t.height||0,layoutOptions:this._options.layoutOptions,links:t.links||[],name:"init",nodes:t.nodes||[],width:t.width||0}),this._worker.onmessage=function(t){switch(t.data.type){case"tick":n.onEvent.emit("tick",t.data.progress);break;case"end":n.onEvent.emit("end",t.data.d)}}):this._layout&&(this._layout.init({height:t.height||0,layoutOptions:this._options.layoutOptions,links:t.links||[],nodes:t.nodes||[],width:t.width||0}),this._layout.onEvent.on("tick",(function(t){n.onEvent.emit("tick",t)})),this._layout.onEvent.on("end",(function(t){n.onEvent.emit("end",t)})))},t.prototype.calculate=function(){this._options.useWorker&&this._worker?this._worker.postMessage({name:"calculate"}):this._layout&&this._layout.calculate()},t.prototype.destroy=function(){this._options.useWorker&&this._worker?(this._worker.postMessage({name:"destroy"}),this._worker.terminate(),this._worker=null):(this._layout&&(this._layout.onEvent.removeAllListeners(),this._layout.destroy()),this._layout=null)},t}();e.d(n,"D3Layout",(function(){return Y}))}])}));