!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define("d3Layout",[],n):"object"==typeof exports?exports.d3Layout=n():t.d3Layout=n()}("undefined"!=typeof self?self:this,function(){return function(t){var n={};function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var i in t)e.d(r,i,function(n){return t[n]}.bind(null,i));return r},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=2)}([function(t,n,e){t.exports=function(){return e(1)('!function(t){var n={};function e(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:i})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(e.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var r in t)e.d(i,r,function(n){return t[n]}.bind(null,r));return i},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=0)}([function(t,n,e){"use strict";e.r(n);function i(t,n,e,i){if(isNaN(n)||isNaN(e))return t;var r,o,u,a,s,f,l,h,c,y=t._root,v={data:i},p=t._x0,x=t._y0,_=t._x1,d=t._y1;if(!y)return t._root=v,t;for(;y.length;)if((f=n>=(o=(p+_)/2))?p=o:_=o,(l=e>=(u=(x+d)/2))?x=u:d=u,r=y,!(y=y[h=l<<1|f]))return r[h]=v,t;if(a=+t._x.call(null,y.data),s=+t._y.call(null,y.data),n===a&&e===s)return v.next=y,r?r[h]=v:t._root=v,t;do{r=r?r[h]=new Array(4):t._root=new Array(4),(f=n>=(o=(p+_)/2))?p=o:_=o,(l=e>=(u=(x+d)/2))?x=u:d=u}while((h=l<<1|f)==(c=(s>=u)<<1|a>=o));return r[c]=y,r[h]=v,t}var r=function(t,n,e,i,r){this.node=t,this.x0=n,this.y0=e,this.x1=i,this.y1=r};function o(t){return t[0]}function u(t){return t[1]}function a(t,n,e){var i=new s(null==n?o:n,null==e?u:e,NaN,NaN,NaN,NaN);return null==t?i:i.addAll(t)}function s(t,n,e,i,r,o){this._x=t,this._y=n,this._x0=e,this._y0=i,this._x1=r,this._y1=o,this._root=void 0}function f(t){for(var n={data:t.data},e=n;t=t.next;)e=e.next={data:t.data};return n}var l=a.prototype=s.prototype;l.copy=function(){var t,n,e=new s(this._x,this._y,this._x0,this._y0,this._x1,this._y1),i=this._root;if(!i)return e;if(!i.length)return e._root=f(i),e;for(t=[{source:i,target:e._root=new Array(4)}];i=t.pop();)for(var r=0;r<4;++r)(n=i.source[r])&&(n.length?t.push({source:n,target:i.target[r]=new Array(4)}):i.target[r]=f(n));return e},l.add=function(t){var n=+this._x.call(null,t),e=+this._y.call(null,t);return i(this.cover(n,e),n,e,t)},l.addAll=function(t){var n,e,r,o,u=t.length,a=new Array(u),s=new Array(u),f=1/0,l=1/0,h=-1/0,c=-1/0;for(e=0;e<u;++e)isNaN(r=+this._x.call(null,n=t[e]))||isNaN(o=+this._y.call(null,n))||(a[e]=r,s[e]=o,r<f&&(f=r),r>h&&(h=r),o<l&&(l=o),o>c&&(c=o));if(f>h||l>c)return this;for(this.cover(f,l).cover(h,c),e=0;e<u;++e)i(this,a[e],s[e],t[e]);return this},l.cover=function(t,n){if(isNaN(t=+t)||isNaN(n=+n))return this;var e=this._x0,i=this._y0,r=this._x1,o=this._y1;if(isNaN(e))r=(e=Math.floor(t))+1,o=(i=Math.floor(n))+1;else{for(var u,a,s=r-e,f=this._root;e>t||t>=r||i>n||n>=o;)switch(a=(n<i)<<1|t<e,(u=new Array(4))[a]=f,f=u,s*=2,a){case 0:r=e+s,o=i+s;break;case 1:e=r-s,o=i+s;break;case 2:r=e+s,i=o-s;break;case 3:e=r-s,i=o-s}this._root&&this._root.length&&(this._root=f)}return this._x0=e,this._y0=i,this._x1=r,this._y1=o,this},l.data=function(){var t=[];return this.visit(function(n){if(!n.length)do{t.push(n.data)}while(n=n.next)}),t},l.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},l.find=function(t,n,e){var i,o,u,a,s,f,l,h=this._x0,c=this._y0,y=this._x1,v=this._y1,p=[],x=this._root;for(x&&p.push(new r(x,h,c,y,v)),null==e?e=1/0:(h=t-e,c=n-e,y=t+e,v=n+e,e*=e);f=p.pop();)if(!(!(x=f.node)||(o=f.x0)>y||(u=f.y0)>v||(a=f.x1)<h||(s=f.y1)<c))if(x.length){var _=(o+a)/2,d=(u+s)/2;p.push(new r(x[3],_,d,a,s),new r(x[2],o,d,_,s),new r(x[1],_,u,a,d),new r(x[0],o,u,_,d)),(l=(n>=d)<<1|t>=_)&&(f=p[p.length-1],p[p.length-1]=p[p.length-1-l],p[p.length-1-l]=f)}else{var g=t-+this._x.call(null,x.data),w=n-+this._y.call(null,x.data),m=g*g+w*w;if(m<e){var M=Math.sqrt(e=m);h=t-M,c=n-M,y=t+M,v=n+M,i=x.data}}return i},l.remove=function(t){if(isNaN(o=+this._x.call(null,t))||isNaN(u=+this._y.call(null,t)))return this;var n,e,i,r,o,u,a,s,f,l,h,c,y=this._root,v=this._x0,p=this._y0,x=this._x1,_=this._y1;if(!y)return this;if(y.length)for(;;){if((f=o>=(a=(v+x)/2))?v=a:x=a,(l=u>=(s=(p+_)/2))?p=s:_=s,n=y,!(y=y[h=l<<1|f]))return this;if(!y.length)break;(n[h+1&3]||n[h+2&3]||n[h+3&3])&&(e=n,c=h)}for(;y.data!==t;)if(i=y,!(y=y.next))return this;return(r=y.next)&&delete y.next,i?(r?i.next=r:delete i.next,this):n?(r?n[h]=r:delete n[h],(y=n[0]||n[1]||n[2]||n[3])&&y===(n[3]||n[2]||n[1]||n[0])&&!y.length&&(e?e[c]=y:this._root=y),this):(this._root=r,this)},l.removeAll=function(t){for(var n=0,e=t.length;n<e;++n)this.remove(t[n]);return this},l.root=function(){return this._root},l.size=function(){var t=0;return this.visit(function(n){if(!n.length)do{++t}while(n=n.next)}),t},l.visit=function(t){var n,e,i,o,u,a,s=[],f=this._root;for(f&&s.push(new r(f,this._x0,this._y0,this._x1,this._y1));n=s.pop();)if(!t(f=n.node,i=n.x0,o=n.y0,u=n.x1,a=n.y1)&&f.length){var l=(i+u)/2,h=(o+a)/2;(e=f[3])&&s.push(new r(e,l,h,u,a)),(e=f[2])&&s.push(new r(e,i,h,l,a)),(e=f[1])&&s.push(new r(e,l,o,u,h)),(e=f[0])&&s.push(new r(e,i,o,l,h))}return this},l.visitAfter=function(t){var n,e=[],i=[];for(this._root&&e.push(new r(this._root,this._x0,this._y0,this._x1,this._y1));n=e.pop();){var o=n.node;if(o.length){var u,a=n.x0,s=n.y0,f=n.x1,l=n.y1,h=(a+f)/2,c=(s+l)/2;(u=o[0])&&e.push(new r(u,a,s,h,c)),(u=o[1])&&e.push(new r(u,h,s,f,c)),(u=o[2])&&e.push(new r(u,a,c,h,l)),(u=o[3])&&e.push(new r(u,h,c,f,l))}i.push(n)}for(;n=i.pop();)t(n.node,n.x0,n.y0,n.x1,n.y1);return this},l.x=function(t){return arguments.length?(this._x=t,this):this._x},l.y=function(t){return arguments.length?(this._y=t,this):this._y};var h=function(t){return function(){return t}},c=function(){return 1e-6*(Math.random()-.5)};function y(t){return t.x+t.vx}function v(t){return t.y+t.vy}function p(t){return t.index}function x(t,n){var e=t.get(n);if(!e)throw new Error("missing: "+n);return e}var _={value:function(){}};function d(){for(var t,n=0,e=arguments.length,i={};n<e;++n){if(!(t=arguments[n]+"")||t in i)throw new Error("illegal type: "+t);i[t]=[]}return new g(i)}function g(t){this._=t}function w(t,n){for(var e,i=0,r=t.length;i<r;++i)if((e=t[i]).name===n)return e.value}function m(t,n,e){for(var i=0,r=t.length;i<r;++i)if(t[i].name===n){t[i]=_,t=t.slice(0,i).concat(t.slice(i+1));break}return null!=e&&t.push({name:n,value:e}),t}g.prototype=d.prototype={constructor:g,on:function(t,n){var e,i,r=this._,o=(i=r,(t+"").trim().split(/^|\\s+/).map(function(t){var n="",e=t.indexOf(".");if(e>=0&&(n=t.slice(e+1),t=t.slice(0,e)),t&&!i.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}})),u=-1,a=o.length;if(!(arguments.length<2)){if(null!=n&&"function"!=typeof n)throw new Error("invalid callback: "+n);for(;++u<a;)if(e=(t=o[u]).type)r[e]=m(r[e],t.name,n);else if(null==n)for(e in r)r[e]=m(r[e],t.name,null);return this}for(;++u<a;)if((e=(t=o[u]).type)&&(e=w(r[e],t.name)))return e},copy:function(){var t={},n=this._;for(var e in n)t[e]=n[e].slice();return new g(t)},call:function(t,n){if((e=arguments.length-2)>0)for(var e,i,r=new Array(e),o=0;o<e;++o)r[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,e=(i=this._[t]).length;o<e;++o)i[o].value.apply(n,r)},apply:function(t,n,e){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],r=0,o=i.length;r<o;++r)i[r].value.apply(n,e)}};var M,N,b=d,k=0,A=0,E=0,j=1e3,O=0,q=0,z=0,P="object"==typeof performance&&performance.now?performance:Date,D="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function T(){return q||(D(B),q=P.now()+z)}function B(){q=0}function L(){this._call=this._time=this._next=null}function S(t,n,e){var i=new L;return i.restart(t,n,e),i}function I(){q=(O=P.now())+z,k=A=0;try{!function(){T(),++k;for(var t,n=M;n;)(t=q-n._time)>=0&&n._call.call(null,t),n=n._next;--k}()}finally{k=0,function(){var t,n,e=M,i=1/0;for(;e;)e._call?(i>e._time&&(i=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:M=n);N=t,C(i)}(),q=0}}function F(){var t=P.now(),n=t-O;n>j&&(z-=n,O=t)}function C(t){k||(A&&(A=clearTimeout(A)),t-q>24?(t<1/0&&(A=setTimeout(I,t-P.now()-z)),E&&(E=clearInterval(E))):(E||(O=P.now(),E=setInterval(F,j)),k=1,D(I)))}L.prototype=S.prototype={constructor:L,restart:function(t,n,e){if("function"!=typeof t)throw new TypeError("callback is not a function");e=(null==e?T():+e)+(null==n?0:+n),this._next||N===this||(N?N._next=this:M=this,N=this),this._call=t,this._time=e,C()},stop:function(){this._call&&(this._call=null,this._time=1/0,C())}};function G(t){return t.x}function H(t){return t.y}var J=10,K=Math.PI*(3-Math.sqrt(5)),Q=function(){function t(){this.events={}}return t.prototype.on=function(t,n){var e=this;return"object"!=typeof this.events[t]&&(this.events[t]=[]),this.events[t].push(n),function(){return e.removeListener(t,n)}},t.prototype.removeListener=function(t,n){if("object"==typeof this.events[t]){var e=this.events[t].indexOf(n);e>-1&&this.events[t].splice(e,1)}},t.prototype.removeAllListeners=function(){var t=this;Object.keys(this.events).forEach(function(n){return t.events[n].splice(0,t.events[n].length)})},t.prototype.emit=function(t){for(var n=this,e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];"object"==typeof this.events[t]&&this.events[t].slice().forEach(function(t){return t.apply(n,e)})},t.prototype.once=function(t,n){var e=this,i=this.on(t,function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];i(),n.apply(e,t)});return i},t}(),R=function(){function t(){this.onEvent=new Q,this._nodes=[],this._links=[],this._options={}}return t.prototype.init=function(t){this._nodes=t.nodes,this._links=t.links,this._options=t.layoutOptions;var n=function(){var t,n,e,i,r=h(-30),o=1,u=1/0,s=.81;function f(i){var r,o=t.length,u=a(t,G,H).visitAfter(y);for(e=i,r=0;r<o;++r)n=t[r],u.visit(v)}function l(){if(t){var n,e,o=t.length;for(i=new Array(o),n=0;n<o;++n)e=t[n],i[e.index]=+r(e,n,t)}}function y(t){var n,e,r,o,u,a=0,s=0;if(t.length){for(r=o=u=0;u<4;++u)(n=t[u])&&(e=Math.abs(n.value))&&(a+=n.value,s+=e,r+=e*n.x,o+=e*n.y);t.x=r/s,t.y=o/s}else{(n=t).x=n.data.x,n.y=n.data.y;do{a+=i[n.data.index]}while(n=n.next)}t.value=a}function v(t,r,a,f){if(!t.value)return!0;var l=t.x-n.x,h=t.y-n.y,y=f-r,v=l*l+h*h;if(y*y/s<v)return v<u&&(0===l&&(v+=(l=c())*l),0===h&&(v+=(h=c())*h),v<o&&(v=Math.sqrt(o*v)),n.vx+=l*t.value*e/v,n.vy+=h*t.value*e/v),!0;if(!(t.length||v>=u)){(t.data!==n||t.next)&&(0===l&&(v+=(l=c())*l),0===h&&(v+=(h=c())*h),v<o&&(v=Math.sqrt(o*v)));do{t.data!==n&&(y=i[t.data.index]*e/v,n.vx+=l*y,n.vy+=h*y)}while(t=t.next)}}return f.initialize=function(n){t=n,l()},f.strength=function(t){return arguments.length?(r="function"==typeof t?t:h(+t),l(),f):r},f.distanceMin=function(t){return arguments.length?(o=t*t,f):Math.sqrt(o)},f.distanceMax=function(t){return arguments.length?(u=t*t,f):Math.sqrt(u)},f.theta=function(t){return arguments.length?(s=t*t,f):Math.sqrt(s)},f}(),e=function(t){var n,e,i,r,o,u=p,a=function(t){return 1/Math.min(r[t.source.index],r[t.target.index])},s=h(30),f=1;function l(i){for(var r=0,u=t.length;r<f;++r)for(var a,s,l,h,y,v,p,x=0;x<u;++x)s=(a=t[x]).source,h=(l=a.target).x+l.vx-s.x-s.vx||c(),y=l.y+l.vy-s.y-s.vy||c(),h*=v=((v=Math.sqrt(h*h+y*y))-e[x])/v*i*n[x],y*=v,l.vx-=h*(p=o[x]),l.vy-=y*p,s.vx+=h*(p=1-p),s.vy+=y*p}function y(){if(i){var a,s,f=i.length,l=t.length,h=new Map(i.map((t,n)=>[u(t,n,i),t]));for(a=0,r=new Array(f);a<l;++a)(s=t[a]).index=a,"object"!=typeof s.source&&(s.source=x(h,s.source)),"object"!=typeof s.target&&(s.target=x(h,s.target)),r[s.source.index]=(r[s.source.index]||0)+1,r[s.target.index]=(r[s.target.index]||0)+1;for(a=0,o=new Array(l);a<l;++a)s=t[a],o[a]=r[s.source.index]/(r[s.source.index]+r[s.target.index]);n=new Array(l),v(),e=new Array(l),_()}}function v(){if(i)for(var e=0,r=t.length;e<r;++e)n[e]=+a(t[e],e,t)}function _(){if(i)for(var n=0,r=t.length;n<r;++n)e[n]=+s(t[n],n,t)}return null==t&&(t=[]),l.initialize=function(t){i=t,y()},l.links=function(n){return arguments.length?(t=n,y(),l):t},l.id=function(t){return arguments.length?(u=t,l):u},l.iterations=function(t){return arguments.length?(f=+t,l):f},l.strength=function(t){return arguments.length?(a="function"==typeof t?t:h(+t),v(),l):a},l.distance=function(t){return arguments.length?(s="function"==typeof t?t:h(+t),_(),l):s},l}(this._links).id(function(t){return t.id});this._options.mainBody.strength&&(n=n.strength(this._options.mainBody.strength)),this._options.mainBody.distanceMin&&(n=n.distanceMin(this._options.mainBody.distanceMin)),this._options.mainBody.distanceMax&&(n=n.distanceMax(this._options.mainBody.distanceMax)),this._options.linkDistance&&(e=e.distance(this._options.linkDistance)),this._simulation=function(t){var n,e=1,i=.001,r=1-Math.pow(i,1/300),o=0,u=.6,a=new Map,s=S(l),f=b("tick","end");function l(){h(),f.call("tick",n),e<i&&(s.stop(),f.call("end",n))}function h(i){var s,f,l=t.length;void 0===i&&(i=1);for(var h=0;h<i;++h)for(e+=(o-e)*r,a.forEach(function(t){t(e)}),s=0;s<l;++s)null==(f=t[s]).fx?f.x+=f.vx*=u:(f.x=f.fx,f.vx=0),null==f.fy?f.y+=f.vy*=u:(f.y=f.fy,f.vy=0);return n}function c(){for(var n,e=0,i=t.length;e<i;++e){if((n=t[e]).index=e,null!=n.fx&&(n.x=n.fx),null!=n.fy&&(n.y=n.fy),isNaN(n.x)||isNaN(n.y)){var r=J*Math.sqrt(e),o=e*K;n.x=r*Math.cos(o),n.y=r*Math.sin(o)}(isNaN(n.vx)||isNaN(n.vy))&&(n.vx=n.vy=0)}}function y(n){return n.initialize&&n.initialize(t),n}return null==t&&(t=[]),c(),n={tick:h,restart:function(){return s.restart(l),n},stop:function(){return s.stop(),n},nodes:function(e){return arguments.length?(t=e,c(),a.forEach(y),n):t},alpha:function(t){return arguments.length?(e=+t,n):e},alphaMin:function(t){return arguments.length?(i=+t,n):i},alphaDecay:function(t){return arguments.length?(r=+t,n):+r},alphaTarget:function(t){return arguments.length?(o=+t,n):o},velocityDecay:function(t){return arguments.length?(u=1-t,n):1-u},force:function(t,e){return arguments.length>1?(null==e?a.delete(t):a.set(t,y(e)),n):a.get(t)},find:function(n,e,i){var r,o,u,a,s,f=0,l=t.length;for(null==i?i=1/0:i*=i,f=0;f<l;++f)(u=(r=n-(a=t[f]).x)*r+(o=e-a.y)*o)<i&&(s=a,i=u);return s},on:function(t,e){return arguments.length>1?(f.on(t,e),n):f.on(t)}}}(this._nodes).force("charge",n).force("link",e).force("center",function(t,n){var e;function i(){var i,r,o=e.length,u=0,a=0;for(i=0;i<o;++i)u+=(r=e[i]).x,a+=r.y;for(u=u/o-t,a=a/o-n,i=0;i<o;++i)(r=e[i]).x-=u,r.y-=a}return null==t&&(t=0),null==n&&(n=0),i.initialize=function(t){e=t},i.x=function(n){return arguments.length?(t=+n,i):t},i.y=function(t){return arguments.length?(n=+t,i):n},i}()).force("x",function(t){var n,e,i,r=h(.1);function o(t){for(var r,o=0,u=n.length;o<u;++o)(r=n[o]).vx+=(i[o]-r.x)*e[o]*t}function u(){if(n){var o,u=n.length;for(e=new Array(u),i=new Array(u),o=0;o<u;++o)e[o]=isNaN(i[o]=+t(n[o],o,n))?0:+r(n[o],o,n)}}return"function"!=typeof t&&(t=h(null==t?0:+t)),o.initialize=function(t){n=t,u()},o.strength=function(t){return arguments.length?(r="function"==typeof t?t:h(+t),u(),o):r},o.x=function(n){return arguments.length?(t="function"==typeof n?n:h(+n),u(),o):t},o}().strength(.1)).force("y",function(t){var n,e,i,r=h(.1);function o(t){for(var r,o=0,u=n.length;o<u;++o)(r=n[o]).vy+=(i[o]-r.y)*e[o]*t}function u(){if(n){var o,u=n.length;for(e=new Array(u),i=new Array(u),o=0;o<u;++o)e[o]=isNaN(i[o]=+t(n[o],o,n))?0:+r(n[o],o,n)}}return"function"!=typeof t&&(t=h(null==t?0:+t)),o.initialize=function(t){n=t,u()},o.strength=function(t){return arguments.length?(r="function"==typeof t?t:h(+t),u(),o):r},o.y=function(n){return arguments.length?(t="function"==typeof n?n:h(+n),u(),o):t},o}().strength(.1)).force("collision",function(t){var n,e,i=1,r=1;function o(){for(var t,o,s,f,l,h,p,x=n.length,_=0;_<r;++_)for(o=a(n,y,v).visitAfter(u),t=0;t<x;++t)s=n[t],h=e[s.index],p=h*h,f=s.x+s.vx,l=s.y+s.vy,o.visit(d);function d(t,n,e,r,o){var u=t.data,a=t.r,y=h+a;if(!u)return n>f+y||r<f-y||e>l+y||o<l-y;if(u.index>s.index){var v=f-u.x-u.vx,x=l-u.y-u.vy,_=v*v+x*x;_<y*y&&(0===v&&(_+=(v=c())*v),0===x&&(_+=(x=c())*x),_=(y-(_=Math.sqrt(_)))/_*i,s.vx+=(v*=_)*(y=(a*=a)/(p+a)),s.vy+=(x*=_)*y,u.vx-=v*(y=1-y),u.vy-=x*y)}}}function u(t){if(t.data)return t.r=e[t.data.index];for(var n=t.r=0;n<4;++n)t[n]&&t[n].r>t.r&&(t.r=t[n].r)}function s(){if(n){var i,r,o=n.length;for(e=new Array(o),i=0;i<o;++i)r=n[i],e[r.index]=+t(r,i,n)}}return"function"!=typeof t&&(t=h(null==t?1:+t)),o.initialize=function(t){n=t,s()},o.iterations=function(t){return arguments.length?(r=+t,o):r},o.strength=function(t){return arguments.length?(i=+t,o):i},o.radius=function(n){return arguments.length?(t="function"==typeof n?n:h(+n),s(),o):t},o}().radius(function(t){return t.size}).iterations(2)).velocityDecay(.08).stop()},t.prototype.calculate=function(){for(var t=0,n=Math.ceil(Math.log(this._simulation.alphaMin())/Math.log(1-this._simulation.alphaDecay()));t<n;++t)this.onEvent.emit("tick",t/n),this._simulation.tick();this.onEvent.emit("end",{nodes:this._nodes,links:this._links})},t.prototype.destroy=function(){this._simulation.stop(),this._simulation=null,this._links=[],this._nodes=[]},t}(),U=self,V=null;U.addEventListener("message",function(t){var n=t.data;switch(n.name){case"init":(V=new R).onEvent.on("tick",function(t){U.postMessage({type:"tick",progress:t})}),V.onEvent.on("end",function(t){U.postMessage({type:"end",d:t})}),V.init(n);break;case"calculate":V&&V.calculate();break;case"destroy":V&&(V.onEvent.removeAllListeners(),V.destroy()),V=null}});n.default=null}]);',null)}},function(t,n,e){"use strict";var r=window.URL||window.webkitURL;t.exports=function(t,n){try{try{var e;try{(e=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder)).append(t),e=e.getBlob()}catch(n){e=new Blob([t])}return new Worker(r.createObjectURL(e))}catch(n){return new Worker("data:application/javascript,"+encodeURIComponent(t))}}catch(t){if(!n)throw Error("Inline worker is not supported");return new Worker(n)}}},function(t,n,e){"use strict";e.r(n);var r=e(0),i=e.n(r),o=function(){function t(){this.events={}}return t.prototype.on=function(t,n){var e=this;return"object"!=typeof this.events[t]&&(this.events[t]=[]),this.events[t].push(n),function(){return e.removeListener(t,n)}},t.prototype.removeListener=function(t,n){if("object"==typeof this.events[t]){var e=this.events[t].indexOf(n);e>-1&&this.events[t].splice(e,1)}},t.prototype.removeAllListeners=function(){var t=this;Object.keys(this.events).forEach(function(n){return t.events[n].splice(0,t.events[n].length)})},t.prototype.emit=function(t){for(var n=this,e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];"object"==typeof this.events[t]&&this.events[t].slice().forEach(function(t){return t.apply(n,e)})},t.prototype.once=function(t,n){var e=this,r=this.on(t,function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];r(),n.apply(e,t)});return r},t}();function u(t,n,e,r){if(isNaN(n)||isNaN(e))return t;var i,o,u,s,a,l,f,h,c,y=t._root,v={data:r},p=t._x0,_=t._y0,d=t._x1,x=t._y1;if(!y)return t._root=v,t;for(;y.length;)if((l=n>=(o=(p+d)/2))?p=o:d=o,(f=e>=(u=(_+x)/2))?_=u:x=u,i=y,!(y=y[h=f<<1|l]))return i[h]=v,t;if(s=+t._x.call(null,y.data),a=+t._y.call(null,y.data),n===s&&e===a)return v.next=y,i?i[h]=v:t._root=v,t;do{i=i?i[h]=new Array(4):t._root=new Array(4),(l=n>=(o=(p+d)/2))?p=o:d=o,(f=e>=(u=(_+x)/2))?_=u:x=u}while((h=f<<1|l)==(c=(a>=u)<<1|s>=o));return i[c]=y,i[h]=v,t}var s=function(t,n,e,r,i){this.node=t,this.x0=n,this.y0=e,this.x1=r,this.y1=i};function a(t){return t[0]}function l(t){return t[1]}function f(t,n,e){var r=new h(null==n?a:n,null==e?l:e,NaN,NaN,NaN,NaN);return null==t?r:r.addAll(t)}function h(t,n,e,r,i,o){this._x=t,this._y=n,this._x0=e,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function c(t){for(var n={data:t.data},e=n;t=t.next;)e=e.next={data:t.data};return n}var y=f.prototype=h.prototype;y.copy=function(){var t,n,e=new h(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return e;if(!r.length)return e._root=c(r),e;for(t=[{source:r,target:e._root=new Array(4)}];r=t.pop();)for(var i=0;i<4;++i)(n=r.source[i])&&(n.length?t.push({source:n,target:r.target[i]=new Array(4)}):r.target[i]=c(n));return e},y.add=function(t){var n=+this._x.call(null,t),e=+this._y.call(null,t);return u(this.cover(n,e),n,e,t)},y.addAll=function(t){var n,e,r,i,o=t.length,s=new Array(o),a=new Array(o),l=1/0,f=1/0,h=-1/0,c=-1/0;for(e=0;e<o;++e)isNaN(r=+this._x.call(null,n=t[e]))||isNaN(i=+this._y.call(null,n))||(s[e]=r,a[e]=i,r<l&&(l=r),r>h&&(h=r),i<f&&(f=i),i>c&&(c=i));if(l>h||f>c)return this;for(this.cover(l,f).cover(h,c),e=0;e<o;++e)u(this,s[e],a[e],t[e]);return this},y.cover=function(t,n){if(isNaN(t=+t)||isNaN(n=+n))return this;var e=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(e))i=(e=Math.floor(t))+1,o=(r=Math.floor(n))+1;else{for(var u,s,a=i-e,l=this._root;e>t||t>=i||r>n||n>=o;)switch(s=(n<r)<<1|t<e,(u=new Array(4))[s]=l,l=u,a*=2,s){case 0:i=e+a,o=r+a;break;case 1:e=i-a,o=r+a;break;case 2:i=e+a,r=o-a;break;case 3:e=i-a,r=o-a}this._root&&this._root.length&&(this._root=l)}return this._x0=e,this._y0=r,this._x1=i,this._y1=o,this},y.data=function(){var t=[];return this.visit(function(n){if(!n.length)do{t.push(n.data)}while(n=n.next)}),t},y.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},y.find=function(t,n,e){var r,i,o,u,a,l,f,h=this._x0,c=this._y0,y=this._x1,v=this._y1,p=[],_=this._root;for(_&&p.push(new s(_,h,c,y,v)),null==e?e=1/0:(h=t-e,c=n-e,y=t+e,v=n+e,e*=e);l=p.pop();)if(!(!(_=l.node)||(i=l.x0)>y||(o=l.y0)>v||(u=l.x1)<h||(a=l.y1)<c))if(_.length){var d=(i+u)/2,x=(o+a)/2;p.push(new s(_[3],d,x,u,a),new s(_[2],i,x,d,a),new s(_[1],d,o,u,x),new s(_[0],i,o,d,x)),(f=(n>=x)<<1|t>=d)&&(l=p[p.length-1],p[p.length-1]=p[p.length-1-f],p[p.length-1-f]=l)}else{var g=t-+this._x.call(null,_.data),w=n-+this._y.call(null,_.data),m=g*g+w*w;if(m<e){var k=Math.sqrt(e=m);h=t-k,c=n-k,y=t+k,v=n+k,r=_.data}}return r},y.remove=function(t){if(isNaN(o=+this._x.call(null,t))||isNaN(u=+this._y.call(null,t)))return this;var n,e,r,i,o,u,s,a,l,f,h,c,y=this._root,v=this._x0,p=this._y0,_=this._x1,d=this._y1;if(!y)return this;if(y.length)for(;;){if((l=o>=(s=(v+_)/2))?v=s:_=s,(f=u>=(a=(p+d)/2))?p=a:d=a,n=y,!(y=y[h=f<<1|l]))return this;if(!y.length)break;(n[h+1&3]||n[h+2&3]||n[h+3&3])&&(e=n,c=h)}for(;y.data!==t;)if(r=y,!(y=y.next))return this;return(i=y.next)&&delete y.next,r?(i?r.next=i:delete r.next,this):n?(i?n[h]=i:delete n[h],(y=n[0]||n[1]||n[2]||n[3])&&y===(n[3]||n[2]||n[1]||n[0])&&!y.length&&(e?e[c]=y:this._root=y),this):(this._root=i,this)},y.removeAll=function(t){for(var n=0,e=t.length;n<e;++n)this.remove(t[n]);return this},y.root=function(){return this._root},y.size=function(){var t=0;return this.visit(function(n){if(!n.length)do{++t}while(n=n.next)}),t},y.visit=function(t){var n,e,r,i,o,u,a=[],l=this._root;for(l&&a.push(new s(l,this._x0,this._y0,this._x1,this._y1));n=a.pop();)if(!t(l=n.node,r=n.x0,i=n.y0,o=n.x1,u=n.y1)&&l.length){var f=(r+o)/2,h=(i+u)/2;(e=l[3])&&a.push(new s(e,f,h,o,u)),(e=l[2])&&a.push(new s(e,r,h,f,u)),(e=l[1])&&a.push(new s(e,f,i,o,h)),(e=l[0])&&a.push(new s(e,r,i,f,h))}return this},y.visitAfter=function(t){var n,e=[],r=[];for(this._root&&e.push(new s(this._root,this._x0,this._y0,this._x1,this._y1));n=e.pop();){var i=n.node;if(i.length){var o,u=n.x0,a=n.y0,l=n.x1,f=n.y1,h=(u+l)/2,c=(a+f)/2;(o=i[0])&&e.push(new s(o,u,a,h,c)),(o=i[1])&&e.push(new s(o,h,a,l,c)),(o=i[2])&&e.push(new s(o,u,c,h,f)),(o=i[3])&&e.push(new s(o,h,c,l,f))}r.push(n)}for(;n=r.pop();)t(n.node,n.x0,n.y0,n.x1,n.y1);return this},y.x=function(t){return arguments.length?(this._x=t,this):this._x},y.y=function(t){return arguments.length?(this._y=t,this):this._y};var v=function(t){return function(){return t}},p=function(){return 1e-6*(Math.random()-.5)};function _(t){return t.x+t.vx}function d(t){return t.y+t.vy}function x(t){return t.index}function g(t,n){var e=t.get(n);if(!e)throw new Error("missing: "+n);return e}var w={value:function(){}};function m(){for(var t,n=0,e=arguments.length,r={};n<e;++n){if(!(t=arguments[n]+"")||t in r)throw new Error("illegal type: "+t);r[t]=[]}return new k(r)}function k(t){this._=t}function M(t,n){for(var e,r=0,i=t.length;r<i;++r)if((e=t[r]).name===n)return e.value}function N(t,n,e){for(var r=0,i=t.length;r<i;++r)if(t[r].name===n){t[r]=w,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=e&&t.push({name:n,value:e}),t}k.prototype=m.prototype={constructor:k,on:function(t,n){var e,r,i=this._,o=(r=i,(t+"").trim().split(/^|\s+/).map(function(t){var n="",e=t.indexOf(".");if(e>=0&&(n=t.slice(e+1),t=t.slice(0,e)),t&&!r.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}})),u=-1,s=o.length;if(!(arguments.length<2)){if(null!=n&&"function"!=typeof n)throw new Error("invalid callback: "+n);for(;++u<s;)if(e=(t=o[u]).type)i[e]=N(i[e],t.name,n);else if(null==n)for(e in i)i[e]=N(i[e],t.name,null);return this}for(;++u<s;)if((e=(t=o[u]).type)&&(e=M(i[e],t.name)))return e},copy:function(){var t={},n=this._;for(var e in n)t[e]=n[e].slice();return new k(t)},call:function(t,n){if((e=arguments.length-2)>0)for(var e,r,i=new Array(e),o=0;o<e;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,e=(r=this._[t]).length;o<e;++o)r[o].value.apply(n,i)},apply:function(t,n,e){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(n,e)}};var b,A,E=m,O=0,j=0,q=0,z=1e3,B=0,P=0,L=0,D="object"==typeof performance&&performance.now?performance:Date,T="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function S(){return P||(T(I),P=D.now()+L)}function I(){P=0}function V(){this._call=this._time=this._next=null}function W(t,n,e){var r=new V;return r.restart(t,n,e),r}function U(){P=(B=D.now())+L,O=j=0;try{!function(){S(),++O;for(var t,n=b;n;)(t=P-n._time)>=0&&n._call.call(null,t),n=n._next;--O}()}finally{O=0,function(){var t,n,e=b,r=1/0;for(;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:b=n);A=t,R(r)}(),P=0}}function F(){var t=D.now(),n=t-B;n>z&&(L-=n,B=t)}function R(t){O||(j&&(j=clearTimeout(j)),t-P>24?(t<1/0&&(j=setTimeout(U,t-D.now()-L)),q&&(q=clearInterval(q))):(q||(B=D.now(),q=setInterval(F,z)),O=1,T(U)))}V.prototype=W.prototype={constructor:V,restart:function(t,n,e){if("function"!=typeof t)throw new TypeError("callback is not a function");e=(null==e?S():+e)+(null==n?0:+n),this._next||A===this||(A?A._next=this:b=this,A=this),this._call=t,this._time=e,R()},stop:function(){this._call&&(this._call=null,this._time=1/0,R())}};function C(t){return t.x}function K(t){return t.y}var G=10,H=Math.PI*(3-Math.sqrt(5)),J=function(){function t(){this.onEvent=new o,this._nodes=[],this._links=[],this._options={}}return t.prototype.init=function(t){this._nodes=t.nodes,this._links=t.links,this._options=t.layoutOptions;var n=function(){var t,n,e,r,i=v(-30),o=1,u=1/0,s=.81;function a(r){var i,o=t.length,u=f(t,C,K).visitAfter(h);for(e=r,i=0;i<o;++i)n=t[i],u.visit(c)}function l(){if(t){var n,e,o=t.length;for(r=new Array(o),n=0;n<o;++n)e=t[n],r[e.index]=+i(e,n,t)}}function h(t){var n,e,i,o,u,s=0,a=0;if(t.length){for(i=o=u=0;u<4;++u)(n=t[u])&&(e=Math.abs(n.value))&&(s+=n.value,a+=e,i+=e*n.x,o+=e*n.y);t.x=i/a,t.y=o/a}else{(n=t).x=n.data.x,n.y=n.data.y;do{s+=r[n.data.index]}while(n=n.next)}t.value=s}function c(t,i,a,l){if(!t.value)return!0;var f=t.x-n.x,h=t.y-n.y,c=l-i,y=f*f+h*h;if(c*c/s<y)return y<u&&(0===f&&(y+=(f=p())*f),0===h&&(y+=(h=p())*h),y<o&&(y=Math.sqrt(o*y)),n.vx+=f*t.value*e/y,n.vy+=h*t.value*e/y),!0;if(!(t.length||y>=u)){(t.data!==n||t.next)&&(0===f&&(y+=(f=p())*f),0===h&&(y+=(h=p())*h),y<o&&(y=Math.sqrt(o*y)));do{t.data!==n&&(c=r[t.data.index]*e/y,n.vx+=f*c,n.vy+=h*c)}while(t=t.next)}}return a.initialize=function(n){t=n,l()},a.strength=function(t){return arguments.length?(i="function"==typeof t?t:v(+t),l(),a):i},a.distanceMin=function(t){return arguments.length?(o=t*t,a):Math.sqrt(o)},a.distanceMax=function(t){return arguments.length?(u=t*t,a):Math.sqrt(u)},a.theta=function(t){return arguments.length?(s=t*t,a):Math.sqrt(s)},a}(),e=function(t){var n,e,r,i,o,u=x,s=function(t){return 1/Math.min(i[t.source.index],i[t.target.index])},a=v(30),l=1;function f(r){for(var i=0,u=t.length;i<l;++i)for(var s,a,f,h,c,y,v,_=0;_<u;++_)a=(s=t[_]).source,h=(f=s.target).x+f.vx-a.x-a.vx||p(),c=f.y+f.vy-a.y-a.vy||p(),h*=y=((y=Math.sqrt(h*h+c*c))-e[_])/y*r*n[_],c*=y,f.vx-=h*(v=o[_]),f.vy-=c*v,a.vx+=h*(v=1-v),a.vy+=c*v}function h(){if(r){var s,a,l=r.length,f=t.length,h=new Map(r.map((t,n)=>[u(t,n,r),t]));for(s=0,i=new Array(l);s<f;++s)(a=t[s]).index=s,"object"!=typeof a.source&&(a.source=g(h,a.source)),"object"!=typeof a.target&&(a.target=g(h,a.target)),i[a.source.index]=(i[a.source.index]||0)+1,i[a.target.index]=(i[a.target.index]||0)+1;for(s=0,o=new Array(f);s<f;++s)a=t[s],o[s]=i[a.source.index]/(i[a.source.index]+i[a.target.index]);n=new Array(f),c(),e=new Array(f),y()}}function c(){if(r)for(var e=0,i=t.length;e<i;++e)n[e]=+s(t[e],e,t)}function y(){if(r)for(var n=0,i=t.length;n<i;++n)e[n]=+a(t[n],n,t)}return null==t&&(t=[]),f.initialize=function(t){r=t,h()},f.links=function(n){return arguments.length?(t=n,h(),f):t},f.id=function(t){return arguments.length?(u=t,f):u},f.iterations=function(t){return arguments.length?(l=+t,f):l},f.strength=function(t){return arguments.length?(s="function"==typeof t?t:v(+t),c(),f):s},f.distance=function(t){return arguments.length?(a="function"==typeof t?t:v(+t),y(),f):a},f}(this._links).id(function(t){return t.id});this._options.mainBody.strength&&(n=n.strength(this._options.mainBody.strength)),this._options.mainBody.distanceMin&&(n=n.distanceMin(this._options.mainBody.distanceMin)),this._options.mainBody.distanceMax&&(n=n.distanceMax(this._options.mainBody.distanceMax)),this._options.linkDistance&&(e=e.distance(this._options.linkDistance)),this._simulation=function(t){var n,e=1,r=.001,i=1-Math.pow(r,1/300),o=0,u=.6,s=new Map,a=W(f),l=E("tick","end");function f(){h(),l.call("tick",n),e<r&&(a.stop(),l.call("end",n))}function h(r){var a,l,f=t.length;void 0===r&&(r=1);for(var h=0;h<r;++h)for(e+=(o-e)*i,s.forEach(function(t){t(e)}),a=0;a<f;++a)null==(l=t[a]).fx?l.x+=l.vx*=u:(l.x=l.fx,l.vx=0),null==l.fy?l.y+=l.vy*=u:(l.y=l.fy,l.vy=0);return n}function c(){for(var n,e=0,r=t.length;e<r;++e){if((n=t[e]).index=e,null!=n.fx&&(n.x=n.fx),null!=n.fy&&(n.y=n.fy),isNaN(n.x)||isNaN(n.y)){var i=G*Math.sqrt(e),o=e*H;n.x=i*Math.cos(o),n.y=i*Math.sin(o)}(isNaN(n.vx)||isNaN(n.vy))&&(n.vx=n.vy=0)}}function y(n){return n.initialize&&n.initialize(t),n}return null==t&&(t=[]),c(),n={tick:h,restart:function(){return a.restart(f),n},stop:function(){return a.stop(),n},nodes:function(e){return arguments.length?(t=e,c(),s.forEach(y),n):t},alpha:function(t){return arguments.length?(e=+t,n):e},alphaMin:function(t){return arguments.length?(r=+t,n):r},alphaDecay:function(t){return arguments.length?(i=+t,n):+i},alphaTarget:function(t){return arguments.length?(o=+t,n):o},velocityDecay:function(t){return arguments.length?(u=1-t,n):1-u},force:function(t,e){return arguments.length>1?(null==e?s.delete(t):s.set(t,y(e)),n):s.get(t)},find:function(n,e,r){var i,o,u,s,a,l=0,f=t.length;for(null==r?r=1/0:r*=r,l=0;l<f;++l)(u=(i=n-(s=t[l]).x)*i+(o=e-s.y)*o)<r&&(a=s,r=u);return a},on:function(t,e){return arguments.length>1?(l.on(t,e),n):l.on(t)}}}(this._nodes).force("charge",n).force("link",e).force("center",function(t,n){var e;function r(){var r,i,o=e.length,u=0,s=0;for(r=0;r<o;++r)u+=(i=e[r]).x,s+=i.y;for(u=u/o-t,s=s/o-n,r=0;r<o;++r)(i=e[r]).x-=u,i.y-=s}return null==t&&(t=0),null==n&&(n=0),r.initialize=function(t){e=t},r.x=function(n){return arguments.length?(t=+n,r):t},r.y=function(t){return arguments.length?(n=+t,r):n},r}()).force("x",function(t){var n,e,r,i=v(.1);function o(t){for(var i,o=0,u=n.length;o<u;++o)(i=n[o]).vx+=(r[o]-i.x)*e[o]*t}function u(){if(n){var o,u=n.length;for(e=new Array(u),r=new Array(u),o=0;o<u;++o)e[o]=isNaN(r[o]=+t(n[o],o,n))?0:+i(n[o],o,n)}}return"function"!=typeof t&&(t=v(null==t?0:+t)),o.initialize=function(t){n=t,u()},o.strength=function(t){return arguments.length?(i="function"==typeof t?t:v(+t),u(),o):i},o.x=function(n){return arguments.length?(t="function"==typeof n?n:v(+n),u(),o):t},o}().strength(.1)).force("y",function(t){var n,e,r,i=v(.1);function o(t){for(var i,o=0,u=n.length;o<u;++o)(i=n[o]).vy+=(r[o]-i.y)*e[o]*t}function u(){if(n){var o,u=n.length;for(e=new Array(u),r=new Array(u),o=0;o<u;++o)e[o]=isNaN(r[o]=+t(n[o],o,n))?0:+i(n[o],o,n)}}return"function"!=typeof t&&(t=v(null==t?0:+t)),o.initialize=function(t){n=t,u()},o.strength=function(t){return arguments.length?(i="function"==typeof t?t:v(+t),u(),o):i},o.y=function(n){return arguments.length?(t="function"==typeof n?n:v(+n),u(),o):t},o}().strength(.1)).force("collision",function(t){var n,e,r=1,i=1;function o(){for(var t,o,s,a,l,h,c,y=n.length,v=0;v<i;++v)for(o=f(n,_,d).visitAfter(u),t=0;t<y;++t)s=n[t],h=e[s.index],c=h*h,a=s.x+s.vx,l=s.y+s.vy,o.visit(x);function x(t,n,e,i,o){var u=t.data,f=t.r,y=h+f;if(!u)return n>a+y||i<a-y||e>l+y||o<l-y;if(u.index>s.index){var v=a-u.x-u.vx,_=l-u.y-u.vy,d=v*v+_*_;d<y*y&&(0===v&&(d+=(v=p())*v),0===_&&(d+=(_=p())*_),d=(y-(d=Math.sqrt(d)))/d*r,s.vx+=(v*=d)*(y=(f*=f)/(c+f)),s.vy+=(_*=d)*y,u.vx-=v*(y=1-y),u.vy-=_*y)}}}function u(t){if(t.data)return t.r=e[t.data.index];for(var n=t.r=0;n<4;++n)t[n]&&t[n].r>t.r&&(t.r=t[n].r)}function s(){if(n){var r,i,o=n.length;for(e=new Array(o),r=0;r<o;++r)i=n[r],e[i.index]=+t(i,r,n)}}return"function"!=typeof t&&(t=v(null==t?1:+t)),o.initialize=function(t){n=t,s()},o.iterations=function(t){return arguments.length?(i=+t,o):i},o.strength=function(t){return arguments.length?(r=+t,o):r},o.radius=function(n){return arguments.length?(t="function"==typeof n?n:v(+n),s(),o):t},o}().radius(function(t){return t.size}).iterations(2)).velocityDecay(.08).stop()},t.prototype.calculate=function(){for(var t=0,n=Math.ceil(Math.log(this._simulation.alphaMin())/Math.log(1-this._simulation.alphaDecay()));t<n;++t)this.onEvent.emit("tick",t/n),this._simulation.tick();this.onEvent.emit("end",{nodes:this._nodes,links:this._links})},t.prototype.destroy=function(){this._simulation.stop(),this._simulation=null,this._links=[],this._nodes=[]},t}(),Q={layoutOptions:{linkDistance:300,mainBody:{distanceMin:1,strength:-1e3}},useWebworker:!0},X=function(){return(X=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var i in n=arguments[e])Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t}).apply(this,arguments)},Y=function(){function t(t){this.onEvent=new o,this._options=X({},Q,t),this._options.useWorker?this._worker=new i.a:this._layout=new J}return t.prototype.init=function(t){var n=this;this._options.useWorker&&this._worker?(this._worker.postMessage({height:t.height||0,layoutOptions:this._options.layoutOptions,links:t.links||[],name:"init",nodes:t.nodes||[],width:t.width||0}),this._worker.onmessage=function(t){switch(t.data.type){case"tick":n.onEvent.emit("tick",t.data.progress);break;case"end":n.onEvent.emit("end",t.data.d)}}):this._layout&&(this._layout.init({height:t.height||0,layoutOptions:this._options.layoutOptions,links:t.links||[],nodes:t.nodes||[],width:t.width||0}),this._layout.onEvent.on("tick",function(t){n.onEvent.emit("tick",t)}),this._layout.onEvent.on("end",function(t){n.onEvent.emit("end",t)}))},t.prototype.calculate=function(){this._options.useWorker&&this._worker?this._worker.postMessage({name:"calculate"}):this._layout&&this._layout.calculate()},t.prototype.destroy=function(){this._options.useWorker&&this._worker?(this._worker.postMessage({name:"destroy"}),this._worker.terminate(),this._worker=null):(this._layout&&(this._layout.onEvent.removeAllListeners(),this._layout.destroy()),this._layout=null)},t}();e.d(n,"D3Layout",function(){return Y})}])});